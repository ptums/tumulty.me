(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{1737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Routes=void 0;var r=d(n(2196)),a=d(n(2210)),o=d(n(2216)),i=d(n(2220)),l=d(n(2234)),s=d(n(2236)),c=d(n(2243)),u=n(613);function d(e){return e&&e.__esModule?e:{default:e}}t.Routes=[(0,u.makeRouteWithAnalytics)("personal-info",s.default),(0,u.makeRouteWithAnalytics)("language-preference",a.default),(0,u.makeRouteWithAnalytics)("password",l.default),(0,u.makeRouteWithAnalytics)("linked-accounts",o.default),(0,u.makeRouteWithAnalytics)("notifications",i.default),(0,u.makeRouteWithAnalytics)("subscriptions",c.default),(0,u.makeRouteWithAnalytics)("courses",r.default)]},1761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SURVEY_TEXTS=t.TYPES=t.ATTEMPTED_SURVEY=t.COMPLETED_SURVEY=t.FREE_COURSE_SURVEY=void 0;var r=n(12),a=(t.FREE_COURSE_SURVEY="free_course_survey",t.COMPLETED_SURVEY="COMPLETED",t.ATTEMPTED_SURVEY="ATTEMPTED",t.TYPES={RADIO:"radio",CHECKBOX:"checkbox",RATING:"rating",CATEGORY_RATING:"category_rating",TEXT_AREA:"text_area",DROPDOWN:"dropdown"}),o=t.SURVEY_TEXTS={get OTHER_TEXT_INPUT(){return(0,r.__)("Other")},get WELCOME_SURVEY_TITLE(){return(0,r.__)("Please help us improve our student experience")},get WELCOME_SURVEY_SUBTITLE(){return(0,r.__)("It will take less than a minute to complete this survey")},get NONE(){return(0,r.__)("None")},get SURVEYS(){return[{question:(0,r.__)("How did you find out about this course?"),answers:[(0,r.__)("Knew about Udacity already and found it on Udacity.com"),(0,r.__)("Found through a search engine (i.e. Google)"),(0,r.__)("A friend, colleague, etc"),(0,r.__)("Heard about Udacity through an advertisement")],type:a.RADIO},{question:(0,r.__)("What would you most like to get out of this course?"),answers:[(0,r.__)("Expand my skills and/or advance in my career"),(0,r.__)("Gain the skills to complete/build a personal project"),(0,r.__)("General knowledge building"),(0,r.__)("Just exploring the technology"),(0,r.__)("See whether or not I like Udacity courses"),(0,r.__)("Complete prerequisites for a Udacity Nanodegree program"),o.OTHER_TEXT_INPUT],type:a.RADIO,hasInput:!0},{question:(0,r.__)("What are the various platforms that you have used for online learning? Select all that apply"),answers:[(0,r.__)("Youtube"),(0,r.__)("Text-based tutorial sites (e.g. W3schools)"),(0,r.__)("Other online platforms (e.g. Coursera, Udemy, EdX)"),o.OTHER_TEXT_INPUT,o.NONE],type:a.CHECKBOX,hasInput:!0},{question:(0,r.__)("How important is each of the following to you in a learning experience?"),categories:[(0,r.__)("Quality of lesson content"),(0,r.__)("Community (collaboration with other students)"),(0,r.__)("The projects I will complete")],range:5,type:a.CATEGORY_RATING,labels:[(0,r.__)("Not important at all"),(0,r.__)("Extremely important")]},{question:(0,r.__)("How important is each of the following to you in a learning experience? (Continue)"),categories:[(0,r.__)("Help services: getting help when I am stuck"),(0,r.__)("Career services: help getting a job"),o.OTHER_TEXT_INPUT],range:5,type:a.CATEGORY_RATING,hasInput:!0,labels:[(0,r.__)("Not important at all"),(0,r.__)("Extremely important")]},{question:(0,r.__)("How much time do you spend per week on this course?"),answers:[(0,r.__)("0 to 2 hours"),(0,r.__)("2 to 5 hours"),(0,r.__)("5 to 10 hours"),(0,r.__)("10+ hours")],type:a.RADIO},{question:(0,r.__)("Which field are you most interested in?"),answers:[(0,r.__)("Data Science / Data Analytics"),(0,r.__)("Artificial Intelligence"),(0,r.__)("Autonomous Systems"),(0,r.__)("Programming / Development"),(0,r.__)("Business (e.g. Digital Marketing)")],type:a.RADIO},{question:(0,r.__)("Based on your experience in the course so far, how likely are you to recommend a Udacity course to a friend or colleague?"),range:10,type:a.RATING,labels:[(0,r.__)("Not likely at all"),(0,r.__)("Extremely likely")]},{question:(0,r.__)("Would you consider taking a paid Udacity Nanodegree Program?"),range:10,type:a.RATING,labels:[(0,r.__)("Not likely at all"),(0,r.__)("Extremely likely")]}]}}},1777:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(28),c=n(0),u=(i=c)&&i.__esModule?i:{default:i};function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(o=a=function(t){function n(){var e,t,a;d(this,n);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return t=a=f(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),a.state={isBusy:!1,_isMounted:!1},a.handleClick=function(e){if(!a.state.isBusy){var t=a.props.onClick;a.setState({isBusy:!0}),r.all([t(e)]).finally((function(){a.state._isMounted&&a.setState({isBusy:!1})}))}},f(a,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),l(n,[{key:"componentDidMount",value:function(){this.state._isMounted=!0}},{key:"componentWillUnmount",value:function(){this.state._isMounted=!1}},{key:"render",value:function(){var t=this.props,n=t.label,r=t.small,a=t.variant,o=t.disabled,i=this.state.isBusy;return e.createElement(s.Button,{variant:a,disabled:o||i,onClick:this.handleClick,label:n,small:r})}}]),n}(e.Component),a.displayName="common/busy-button",a.propTypes={label:u.default.string,className:u.default.string,disabled:u.default.bool,onClick:u.default.func.isRequired},a.defaultProps={label:"",variant:"primary",className:"",disabled:!1},o);t.default=p}).call(this,n(1),n(11))},1821:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o,i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=f(n(1777)),c=f(n(0)),u=n(12),d=f(n(2211));function f(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=e((i=o=function(e){function t(){return p(this,t),m(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.onCancelClick,n=e.onSaveClick,a=e.isSaveEnabled;return r.createElement("div",{styleName:"buttons-container"},r.createElement(s.default,{onClick:t,variant:"secondary",label:(0,u.__)("cancel")}),r.createElement(s.default,{onClick:n,variant:"primary",disabled:!a,label:(0,u.__)("save")}))}}]),t}(r.Component),o.displayName="settings/setting-buttons",o.propTypes={onSaveClick:c.default.func,onCancelClick:c.default.func,isSaveEnabled:c.default.bool},o.defaultProps={onSaveClick:a.noop,onCancelClick:a.noop,isSaveEnabled:!0},i),d.default)}).call(this,n(10),n(1),n(4))},1823:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.COPY=t.MAX_FILE_SIZE=t.FILE_TYPES=void 0;var r=n(12);t.FILE_TYPES=["image/jpeg","image/jpg","image/png"],t.MAX_FILE_SIZE=15728640,t.COPY={fileTypeError:(0,r.__)("Please upload a JPG or PNG."),fileSizeError:(0,r.__)("Max file size is 1MB."),dimensionError:(0,r.__)("Please upload a 120x120 image."),genericError:(0,r.__)("Something went wrong. Try again.")}},1824:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=l(n(603)),a=l(n(114)),o=l(n(614)),i=l(n(19));function l(e){return e&&e.__esModule?e:{default:e}}var s=[o.default.UNSUBMITTED,o.default.UNGRADEABLE,o.default.FAILED,o.default.ERRED,o.default.CANCELED],c={State:{isFreeTrial:function(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.default)(),o=r.default.State.getOrderHistory(t),l=r.default.getMostRecentOrderForNdKey(o,n),s=e.get(l,"period_end_date",a);return"trialing"===e.get(l,"status")&&a.isBefore(s)},canSubmitProjectWhileTrialing:function(t,n,r){var i=a.default.getNanodegree(t,n);return Object.values(e.get(i,"projects",{})).map((function(e){return a.default.getProject(t,e.key)})).every((function(e){return e.key===r?s.includes(e.state)&&!e.is_career:e.state===o.default.UNSUBMITTED||e.is_career}))},getNextPaymentUrl:function(t,n){var a=r.default.State.getOrderHistory(t),o=r.default.getMostRecentOrderForNdKey(a,n);return e.get(o,"next_payment.payment_url")}}};t.default=c}).call(this,n(4))},1851:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MinimalCard=t.Card=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=l(n(0)),i=l(n(1891));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var c=e((function(e){var t=e.icon,n=e.imageUrl,a=e.primary,o=e.renderCTA,i=e.summary,l=e.title;return r.createElement("div",{styleName:"contents"},n&&r.createElement("img",{src:n,styleName:"card-image",alt:l}),t&&r.createElement("div",{styleName:"icon"},t),r.createElement("div",{styleName:"text"},l&&r.createElement("h3",null,l),i&&r.createElement("p",{styleName:"summary"},i)),o&&r.createElement("div",{styleName:"cta"},o({primary:a})))}),i.default);c.displayName="nanodegree-dashboard/overview/card/_card",c.propTypes={icon:o.default.element,imageUrl:o.default.string,primary:o.default.bool,renderCTA:o.default.func,summary:o.default.string,title:o.default.string};var u=function(e){var t=e.footer,n=e.header,a=s(e,["footer","header"]);return r.createElement("li",{styleName:a.primary?"card-primary":"card-secondary"},n,r.createElement(c,a),t)};u.displayName="nanodegree-dashboard/overview/card/_card",u.propTypes=a({footer:o.default.node,header:o.default.node},c.propTypes),u.defaultProps={primary:!1};var d=e(u,i.default),f=function(e){var t=e.intent,n=s(e,["intent"]);return r.createElement("li",{styleName:"card-minimal-"+t},r.createElement(c,n))};f.displayName="nanodegree-dashboard/overview/card/_card",f.propTypes=a({intent:o.default.oneOf(["primary","info","warning"])},c.propTypes),f.defaultProps={primary:!1};var p=e(f,i.default);t.Card=d,t.MinimalCard=p}).call(this,n(10),n(1))},1886:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(611);var o=(0,((r=a)&&r.__esModule?r:{default:r}).default)({loader:function(){return Promise.all([n.e(15),n.e(7)]).then(n.t.bind(null,2068,7))},loading:function(){return null}});t.default=o},1887:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.Avatar=c;var a=s(n(0)),o=s(n(1888)),i=s(n(1889)),l=n(1);function s(e){return e&&e.__esModule?e:{default:e}}function c(t){var n=t.firstName,a=t.lastName,s=t.avatarUrl,c=t.userId,u=t.sizeSelection,d=(0,l.useState)(!1),f=r(d,2),p=f[0],m=f[1],h=!!s&&!p,_=h?s:o.default.makeIdenticon(c,o.default.translateSizeSelectionToInt(u)),y=h?"profile-pic":"default-identicon",g=n+" "+a;return e.createElement("div",{className:i.default.avatar},e.createElement("img",{src:_,alt:"user avatar","data-tst":y,title:g||"anonymous",className:i.default["avatar-img-"+u],onError:function(){return m(!0)}}))}c.defaultProps={sizeSelection:"default"},c.propTypes={first_name:a.default.string,last_name:a.default.string,photo_url:a.default.string,id:a.default.string,sizeSelection:a.default.oneOf(["sm","md","lg","xl","default"])},t.default=c}).call(this,n(1))},1888:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(621),o=(r=a)&&r.__esModule?r:{default:r};var i={cycleId:function(e){if(e.toString().length>=15)return e;for(var t=e.toString();t.length<15;)t+=e;return t.slice(0,16)},makeIdenticon:e.memoize((function(e,t){return e?"data:image/png;base64,"+new o.default(""+i.cycleId(e),t).toString():""}),(function(e,t){return e+" "+t})),translateSizeSelectionToInt:function(e){switch(e){case"sm":return 24;case"md":return 64;case"lg":return 72;case"xl":return 120}return 32}};t.default=i}).call(this,n(4))},1889:function(e,t,n){e.exports={"avatar-img-default":"index--avatar-img-default--oWycM","avatar-img-sm":"index--avatar-img-sm--2Mplr","avatar-img-md":"index--avatar-img-md--rrI0B","avatar-img-lg":"index--avatar-img-lg---CT0N","avatar-img-xl":"index--avatar-img-xl--2m7Yq"}},1890:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.FileService=t.pica=void 0;var r,a=n(1823),o=n(1975),i=(r=o)&&r.__esModule?r:{default:r};var l=t.pica=(0,i.default)(),s=t.FileService={getBase64:function(t){return new e((function(e,n){var r=new FileReader;r.onloadend=function(){e(r.result)},r.onerror=function(e){n(e)},r.readAsDataURL(t)}))},calculateAspectRatioFit:function(e,t,n,r){if(e<=n&&t<=r)return{width:e,height:t};var a=Math.min(n/e,r/t);return{width:e*a,height:t*a}},getImagePreview:function(t){var n=t[0],r=n.type,o=n.name,i=document.createElement("canvas");try{return s.getBase64(n).then((function(t){return new e((function(e,n){var c=new Image;c.onload=function(){(c.width<120||c.height<120)&&n(new Error(a.COPY.dimensionError));var t=s.calculateAspectRatioFit(c.width,c.height,800,800);i.width=t.width,i.height=t.height,l.resize(c,i,{unsharpAmount:80,unsharpRadius:.6,unsharpThreshold:2}).then((function(e){return l.toBlob(e,r)})).then((function(t){return e(s.getBase64(new File([t],o,{type:r})))}))},c.src=t}))}))}catch(e){throw Error(e)}},verifyPhotoFile:function(e){var t=e[0];if(!a.FILE_TYPES.includes(t.type))throw new Error(a.COPY.fileTypeError);if(t.size>a.MAX_FILE_SIZE)throw new Error(a.COPY.fileSizeError)}};t.default=s}).call(this,n(11))},1891:function(e,t,n){e.exports={_card:"_card--_card--1V87g shared--card--3X88h","card-image":"_card--card-image--2M3JT","card-primary":"_card--card-primary--2lSgO _card--_card--1V87g shared--card--3X88h","card-secondary":"_card--card-secondary--1x4n6 _card--_card--1V87g shared--card--3X88h","_card-minimal":"_card--_card-minimal--3UyWs _card--_card--1V87g shared--card--3X88h","card-minimal-info":"_card--card-minimal-info--eL63o _card--_card-minimal--3UyWs _card--_card--1V87g shared--card--3X88h","card-minimal-warning":"_card--card-minimal-warning--3xkRE _card--_card-minimal--3UyWs _card--_card--1V87g shared--card--3X88h",icon:"_card--icon--1sbtU","card-minimal-primary":"_card--card-minimal-primary--3MVO9 _card--_card-minimal--3UyWs _card--_card--1V87g shared--card--3X88h",contents:"_card--contents--6oCzZ",text:"_card--text--3j4x0",cta:"_card--cta--3lh2c",summary:"_card--summary--iEQxH"}},1895:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.generateDiscountCoupon=t.checkDiscountOfferEligibility=t.SupportOptionHelpers=t.SUPPORT_BY=void 0;var a,o,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.checkDiscountOfferEligibility=(a=y(regeneratorRuntime.mark((function e(t,n){var r,a,o,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,a="",o="",i="",e.prev=4,e.next=7,c.default.isDiscountEligible(t,n);case 7:l=e.sent,r=l.is_eligible,a=l.discount_amount_display,o=l.subtotal_amount_display,i=l.refunded_amount_display,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),(0,m.reportError)(e.t0,{tags:{cancelEvent:!0}});case 17:return e.abrupt("return",{discountOfferEligible:r,discountDisplayPrice:a,subtotalDisplayAmount:o,refundDisplayAmount:i});case 18:case"end":return e.stop()}}),e,this,[[4,14]])}))),function(e,t){return a.apply(this,arguments)}),t.generateDiscountCoupon=(o=y(regeneratorRuntime.mark((function e(t,n){var r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=!1,e.prev=1,e.next=4,c.default.applySubscriptionDiscount(t,n);case 4:a=e.sent,r=a.success,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),(0,m.reportError)(e.t0,{tags:{cancelEvent:!0}});case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e,this,[[1,8]])}))),function(e,t){return o.apply(this,arguments)});t.bestSupportOption=function(e,t){var n=b.isIntercomLoaded(),r=b.isWithinCallSupportArea(e),a=t.call_only_override&&t.call&&r,o=[].concat(v).filter((function(e){return E(e,t.chat,"chat")})).filter((function(e){return E(e,t.call,"phone")})).filter((function(e){return E(e,t.email,"email")})).filter((function(e){return E(e,t.self_serve_with_discount||t.self_serve_with_discount_low_grc,"discount")})).filter((function(e){return E(e,t.call_only_override,"phone-only")})).filter((function(e){return E(e,r,"phone")})).filter((function(e){return E(e,!a,"chat")})).filter((function(e){return E(e,!a,"email")})).filter((function(e){return E(e,n,"chat")}));if(0===o.length)throw Error("Unexpected no support options remaining");return o[0].name},t._supportTypeValue=C,t.commonCancellationEventProps=function(e,t,n,a,o){var i=b.isIntercomLoaded(),l=b.isWithinCallSupportArea(e),s=a||{score:null,type:null,day:null,fullModel:null},c=s.score,u=s.type,f=s.day,p=s.fullModel,m=o||{},h=m.chat,_=m.call,y=m.email,g=m.call_only_override,v=m.self_serve_with_discount,E=m.self_serve_with_discount_low_grc;return{auto_renew_eligible:d.default.isAutoRenewEligible(n),campaign_name:r.get(n,"campaign_name"),cancel_flow_version:8,country:e,region:t,has_intercom:i,is_within_call_support_area:l,eligible_for_refund:d.default.isEligibleForRefund(n),enrolled_at:r.get(n,"created_at",""),first_payment_length:d.default.firstPaymentLength(n),has_paid:d.default.hasPaid(n),nd_key:d.default.getNanodegreeKey(n),nd_title:d.default.getNanodegreeTitle(n),payment_method:d.default.getPaymentMethod(n),payment_plan_type:r.get(n,"payment_plan.type",""),purchase_urn:d.default.getSubscriptionURN(n),optimizely_chat_enabled:h,optimizely_call_enabled:_,optimizely_email_enabled:y,optimizely_call_only_override_enabled:g,optimizely_self_serve_discount_enabled:v,optimizely_self_serve_discount_low_grc_enabled:E,grc_model:p,grc_score:c,grc_score_type:u,grc_model_day:f}},t._sendCancelEvent=w,t.sendModalOpenEvent=function(e,t){w(e,s.EVENT_NAME.CANCEL_CLICKED,t)},t.sendModalCloseEvent=function(e,t){w(e,s.EVENT_NAME.MODAL_CLOSED,t)},t.sendCancelRequestInitiated=function(e,t,n,r){w(e,s.EVENT_NAME.REQUESTED,t,l({label:n},r))},t.sendCancelDiscountEvent=function(e,t,n,r){w(e,s.EVENT_NAME.DISCOUNT,t,l({label:n},r))},t.setAllFeaturesTo=S,t.checkCancelFlowFeatures=function(e,t,n){var r=n.userId,a=n.subscription,o=Object.values(s.FEATURES),l={},c=s.ATTRIBUTES,p=c.COUNTRY_CODE,h=c.HOUR_OF_DAY,_=c.DAY_OF_WEEK,y=c.REGION,g=c.RETENTION_PROBABILITY,v=c.TEST_USER;return l[p]=d.default.getCountryCode(a),l[_]=b.getDayOfWeek(),l[h]=b.getHourOfDay(),l[y]=d.default.getRegion(a),l[v]=f.default.get(CONFIG.optimizelyTestCookie),e().then((function(e){return e}),(function(e){console.error("Error fetching a prediction. ",e&&e.message)})).then((function(e){var n=u.default.getGrcModel(e,1);return l[g]=n.score,t(r,o,l)})).then((function(e){return Object.entries(s.FEATURES).reduce((function(t,n){var r=i(n,2),a=r[0],o=r[1];return t[a]=!!e[o],t}),{})})).catch((function(e){return(0,m.reportError)(e,{tags:{cancelEvent:!0}}),S(null)}))};var s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1988)),c=_(n(620)),u=_(n(1989)),d=_(n(607)),f=_(n(188)),p=_(n(349)),m=n(348),h=n(1896);function _(e){return e&&e.__esModule?e:{default:e}}function y(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}var g=t.SUPPORT_BY={SELF_SERVE_DISCOUNT:{name:"self-serve-discount",value:s.EVENT_VALUE.SELF_SERVE_DISCOUNT,requires:["discount"]},PHONE_CHAT:{name:"phone-chat",value:s.EVENT_VALUE.CALL_AND_CHAT,requires:["phone","chat"]},CHAT:{name:"chat",value:s.EVENT_VALUE.CHAT,requires:["chat"]},PHONE_EMAIL:{name:"phone-email",value:s.EVENT_VALUE.CALL_AND_EMAIL,requires:["phone","email"]},PHONE:{name:"phone",value:s.EVENT_VALUE.CALL,requires:["phone","phone-only"]},SELF_SERVE:{name:"self-serve",value:s.EVENT_VALUE.SELF_SERVE,requires:[]},LAST_RESORT:{name:"self-serve-discount",value:s.EVENT_VALUE.SELF_SERVE_DISCOUNT,requires:[]}},v=[g.SELF_SERVE_DISCOUNT,g.PHONE_CHAT,g.CHAT,g.PHONE_EMAIL,g.PHONE,g.LAST_RESORT],b=t.SupportOptionHelpers={getHourOfDay:function(){return(0,p.default)().tz(s.CALL_CENTER.timeZone).hour()},getDayOfWeek:function(){return(0,p.default)().tz(s.CALL_CENTER.timeZone).day()},isWithinCallSupportArea:function(e){return s.CALL_CENTER.regions.includes(e)},isIntercomLoaded:function(){return"function"==typeof Intercom}},E=function(e,t,n){return!!t||-1===e.requires.indexOf(n)};function C(e){var t=Object.values(g).find((function(t){return t.name===e}));return void 0===t?((0,m.reportError)(Error("Unrecognized support type: "+e),{tags:{cancelEvent:!0}}),e):t.value}function w(e,t,n,r){var a=C(n);return(0,h.sendSegmentProxyEvent)(t,l({},e,r,{value:a,category:a})).catch((function(e){(0,m.reportError)(e,{tags:{cancelEvent:!0,eventName:t}})}))}function S(e){return Object.entries(s.FEATURES).reduce((function(t,n){return t[i(n,1)[0]]=e,t}),{})}}).call(this,n(11),n(4))},1896:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendSegmentProxyEvent=void 0;var r,a=n(32),o=(r=a)&&r.__esModule?r:{default:r};t.sendSegmentProxyEvent=function(e,t){return o.default.gql.apply(o.default,function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(function(e,t){return["\n      mutation createSegmentProxyEvent($eventName: String!, $properties: JSON) {\n        proxySegmentEvent(eventName:$eventName, properties:$properties)\n      }\n    ",{eventName:e,properties:t}]}(e,t))).then((function(e){return e}))}},1899:function(e,t,n){"use strict";(function(e){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.CANCEL_SURVEY=void 0;var a=n(1761),o=n(12);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a={};if(a[n])return a[n];var i=e.map(t,(function(t){if(r.dropdown)return{value:t,translated:(0,o.__)(t)};if(e.isString(t))return{raw:t,translated:(0,o.__)(t)};var n=t.reason;return{key:t.key,raw:n,translated:(0,o.__)(n)}})),l=r.noShuffle?i:e.shuffle(i);return n&&(a[n]=l),l}var s=l([{key:"time",reason:"I am not able to dedicate enough time to this Nanodegree program"},{key:"fit",reason:"This Nanodegree program is not a great fit for me"},{key:"quality",reason:"I am not happy with the quality of your content"},{key:"cost",reason:"I don't feel this Nanodegree program is worth the cost"},{key:"support",reason:"I wasn't happy with the level of support or mentorship I received"}],"main"),c=l([{key:"cost",reason:"I think the price is too high"},{key:"time",reason:"I do not have enough time to complete this program"},{key:"fit",reason:"I would like to switch to a different program"}],"main",{noShuffle:!0}),u=(i(r={},"time",{question:(0,o.__)("What is the main reason you are not able to dedicate enough time?"),options:l(["Work commitments","Family commitments","The program is not engaging enough for me","I'm putting my time towards other learning platforms","Deadlines are too aggressive","I can't seem to schedule time to work on the program"],"time"),hasOtherOption:!0,type:a.TYPES.RADIO}),i(r,"fit",{question:(0,o.__)("What is the main reason the Nanodegree program is not a good fit?"),options:l(["The content was not what I was looking for","I am no longer interested in the content","I was looking for more foundational content","I was looking for more advanced content","I don't like the format or style of the course"],"fit"),hasOtherOption:!0,type:a.TYPES.RADIO}),i(r,"quality",{question:(0,o.__)("I am not happy with the quality of your content"),options:l(["The content is not the right level of difficulty for me","The coverage of the topics is not deep or thorough enough","The program content is disorganized, unclear, or confusing","There isn't enough hands-on practice","The content, format, or instructors are not engaging","Some of the projects were not valuable for me"],"quality"),hasOtherOption:!0,type:a.TYPES.RADIO}),i(r,"cost",{question:(0,o.__)("Why is the program not worth the cost?"),type:a.TYPES.TEXT_AREA}),i(r,"support",{question:(0,o.__)("Which option best describes why you are not happy with the level of support or mentorship?"),options:l(["I couldn't get a timely response from my mentor","The mentor did not have relevant technical skills","The mentor did not have good communication skills","I did not get a timely resolution to my support requests over email","I needed more or better interaction with fellow students"],"support"),hasOtherOption:!0,type:a.TYPES.RADIO}),r);t.CANCEL_SURVEY={TIME:"time",FIT:"fit",QUALITY:"quality",COST:"cost",SUPPORT:"support",OTHER:"Other",get FOLLOW_UP_QUESTIONS(){return u},getReasons:function(t){var n=t.isPreorder;return e.filter(s,(function(e){var t=e.key,r=!0;return n&&(r=r&&"quality"!==t),r}))},getReasonsShortVariation:function(){return c},getFollowUpQuestion:function(t){return e.get(u,t)}}}).call(this,n(4))},1973:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(347),o=l(n(603)),i=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t){var n={category:t.category||null,label:t.label||null,product_key:e.product_key,variant:e.product_variant,name:e.name,price:e.amount/100,currency:e.currency};if(e.type===a.FLEX_SUBSCRIPTION){var r=i.default.get(e,"purchased_products[0]")||{};n.term_id=r.term_id,n.cohort_id=r.cohort_id,n.product_key=r.nanodegree_key,n.type=e.type,n.price=o.default.getDisplayPrice(i.default.get(e,"original_price.display","")),n.name=e.purchased_product_description,n.purchase_urn=e.urn}return n}var c={getSubscriptionData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?r({},s(e,t),{subscription_id:e.id,sku:e.product_key}):{}},getCourseData:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e?{course_id:e.id,category:t.category||null,label:t.label||null,is_graduated:e.is_graduated,title:e.title}:{}}};t.default=c},1978:function(e,t,n){e.exports=n.p+"images/ghost-fef4b.gif"},1986:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,o,i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(12),c=n(2283),u=(i=c)&&i.__esModule?i:{default:i};function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=e((o=a=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){return r.createElement("div",null,r.createElement("h1",{styleName:"header-text"},(0,s.__)("Billing Information")))}}]),t}(r.Component),a.displayName="settings/setting-billing/_billing-header",o),u.default)}).call(this,n(10),n(1))},1987:function(e,t,n){e.exports=n.p+"images/ghost-sleeping-250d1.png"},1988:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EVENT_NAME={CANCEL_CLICKED:"Cancel CTA Clicked",REQUESTED:"Cancel Request Initiated",DISCOUNT:"Cancel Request Discount",MODAL_CLOSED:"Cancel Modal Closed"},t.EVENT_VALUE={CALL_AND_CHAT:"Call_and_Chat",CALL_AND_EMAIL:"Call_and_Email",CHAT:"Chat_Only",EMAIL:"Email_Only",CALL:"Phone_Only",SELF_SERVE:"Self_Serve",SELF_SERVE_DISCOUNT:"Self_Serve_Discount"},t.EVENT_LABEL={CALL_CLICKED:"Call_CTA_Clicked",CHAT_CLICKED:"Chat_CTA_Clicked",EMAIL_CLICKED:"Email_CTA_Clicked",SELF_SERVE:"Self_Serve_Cancel_From_Survey",SELF_SERVE_DISCOUNT_DISQUALIFIED:"Self_Serve_Cancel_From_Discount",SELF_SERVE_DISCOUNT_PRESENTED:"Self_Serve_Discount_CTA_Presented",SELF_SERVE_DISCOUNT_ABANDONED:"Self_Serve_Discount_CTA_Abandoned",SELF_SERVE_DISCOUNT_ACCEPTED:"Self_Serve_Discount_CTA_Accepted",SELF_SERVE_DISCOUNT_APPLIED:"Self_Serve_Discount_CTA_Applied",SELF_SERVE_DISCOUNT_SEARCH_CATALOG:"Self_Serve_Discount_CTA_Search_Catalog",SELF_SERVE_DISCOUNT_APPLY_FAILED:"Self_Serve_Discount_CTA_Apply_Failed"},t.FEATURES={call:"cancel_call_flow",chat:"cancel_chat_flow",email:"cancel_email_flow",call_only_override:"cancel_call_flow_only_override",self_serve_with_discount:"cancel_survey_discount_flow",self_serve_with_discount_low_grc:"cancel_survey_discount_flow_low_grc"},t.ATTRIBUTES={COUNTRY_CODE:"country_code",DAY_OF_WEEK:"day_of_week_new_york",HOUR_OF_DAY:"hour_of_day_new_york",REGION:"region",RETENTION_PROBABILITY:"rp",TEST_USER:"test_user"},t.INTERCOM_ID={CHAT:"intercom-cancel-via-chat"},t.EMAIL_ADDRESS="keeplearning@udacity.com",t.CALL_CENTER={phoneNumber:"18008549945",phoneLabel:"Call 800 - 854 - 9945",timeZone:"America/New_York",regions:["US","CA"]}},1989:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={getGrcModel:function(e,t){var n={score:t,type:null,day:null,fullModel:null};if(!e)return n;var r=e.find((function(e){return"GRC"===e.model}));return r&&r.values?r.values.day_7?{score:r.values.day_7.r,type:"r",day:7,fullModel:r}:r.values.day_14?{score:r.values.day_14.r,type:"r",day:14,fullModel:r}:r.values.day_21?{score:r.values.day_21.r,day:21,type:"r",fullModel:r}:n:n}}},1990:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};t.CancelByPhone=ee,t.SecondaryChat=te,t.SecondaryEmail=ne,t.CancelByChat=re,t.CancelError=function(){return r.createElement("div",null,r.createElement(i.Heading,{size:"h3",align:"center"},(0,g.__)(R)),r.createElement("div",{className:v.default.body},(0,g.__)(k)))},t.CancelSurveyDiscountQuestions=ae,t.CancelDiscountOffer=oe,t.CancelSuccess=ie,t.CancelDiscountOfferError=le;var i=n(28),l=n(1899),s=E(n(1991)),c=E(n(2300)),u=E(n(1992)),d=E(n(2301)),f=E(n(2302)),p=E(n(603)),m=E(n(2303)),h=E(n(0)),_=n(1761),y=E(n(2304)),g=n(12),v=E(n(1993)),b=n(1);function E(e){return e&&e.__esModule?e:{default:e}}var C="We're Here to Help!",w="To change or cancel, please talk to an Enrollment Advisor.",S="Chat with Us",O="Request Sent",N="At Udacity, we provide you with the fastest, most flexible way to upgrade and expand your technology and business skills. Udacity Nanodegree programs represent collaborations with our industry partners who help us develop our content.",P="If you cannot connect with us by phone, please email keeplearning@udacity.com for an Enrollment Advisor who can process your request and assist you with other matters.",T='If you cannot connect with us by phone, <span class="linkify">click here</span> to chat with an Enrollment Advisor who can process your request and assist you with other matters.',R="An unexpected error occurred",k="Please refresh the page and try again.",A="Your Cancellation Confirmation",x="We've cancelled your enrollment in this program. Check out our catalog to find the right Nanodegree program for you.",D="We've cancelled your enrollment in this program effective <%= periodEndDate %>. Check out our catalog to find the right Nanodegree program for you.",I="Unable To Generate Coupon",M="Please contact support at keeplearning@udacity.com for additional assistance.",L="Continue Cancellation",U="Accept Offer",j="Loading",F="We're sorry to see you go!",q="Keep learning for less",H="Need more time?",V="We want to help keep your learning on track!",B="Your discount will be applied to all future payments.",Y="You will receive a refund of <%= refundedDisplayAmount %> for the current month.",W="Your feedback is valuable to helping us improve our programs. Once you complete the survey, your subscription will be cancelled effective: <%= periodEndDate %>",z="Your feedback is valuable to helping us improve our programs. Canceling your subscription will result in loss of access immediately. Your refund will be posted to your billing history.",G="Back",K="Search Catalog",Q="Close",X="Next payment: ",Z="Original price: ",J="But you've made it this far!",$="Get to the finish line!";function ee(e){return r.createElement("div",null,r.createElement(i.Heading,{size:"h3",align:"center"},(0,g.__)(C)),r.createElement("div",{className:v.default.body},r.createElement("div",{className:v.default["image-container"]},r.createElement("img",{src:m.default,alt:"phone"})),r.createElement("div",{className:v.default.secondary},r.createElement(i.Text,null,(0,g.__)(w)))),r.createElement("div",{className:v.default["button-container"]},r.createElement("div",{className:v.default.center,id:"cancel-via-phone"},r.createElement(i.Button,{full:!0,label:e.phoneLabel,onClick:e.handleCall,variant:"primary"}))),e.children)}function te(e){return r.createElement("div",{className:v.default.subtext,id:e.chatId},(0,g.__)(N)," ",r.createElement("a",{href:"#",onClick:e.handleChat},(0,g.__)(T,null,{renderHTML:!0})))}function ne(e){return r.createElement("div",{className:v.default.subtext},(0,g.__)(N)," ",(0,g.__)(P,{email:e.emailAddress}))}function re(e){var t=(0,b.useState)(!1),n=o(t,2),a=n[0],l=n[1];return r.createElement("div",null,r.createElement(i.Heading,{size:"h3",align:"center"},(0,g.__)(C)),r.createElement("div",{className:v.default.body},r.createElement("div",{className:v.default["image-container"]},r.createElement("img",{src:d.default,alt:"text messaging app"})),r.createElement("div",{className:v.default.secondary},r.createElement(i.Text,null,(0,g.__)(w)))),r.createElement("div",{className:v.default["button-container"]},r.createElement("div",{className:v.default.center,id:e.chatId},r.createElement(i.Button,{full:!0,disabled:a,label:(0,g.__)(a?O:S),onClick:function(){l(!0),e.handleChat()},variant:"primary"}))))}function ae(t){var n,c,u=this,d=(0,b.useState)(l.CANCEL_SURVEY.COST),f=o(d,2),p=f[0],m=f[1],h=(0,b.useState)(""),y=o(h,2),E=y[0],C=y[1],w=(0,b.useState)(l.CANCEL_SURVEY.getReasonsShortVariation().find((function(e){return e.key===l.CANCEL_SURVEY.COST})).raw),S=o(w,2),O=S[0],N=S[1],P=(n=regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=a.get(n,"raw"),o=a.get(n,"key"),m(o),N(r),t.handleCancelReasonChange(o,r);case 5:case"end":return e.stop()}}),e,u)})),c=function(){var t=n.apply(this,arguments);return new e((function(n,r){return function a(o,i){try{var l=t[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));n(s)}("next")}))},function(e){return c.apply(this,arguments)}),T=t.periodEndDate,R=t.handleDiscountOfferEligibleOrCancel,k=t.checkOfferEligibilityInFlight,A=t.handleModalClose,x=t.cancelInFlight,D=t.isLoading,I=t.isRefundable?(0,g.__)(z):(0,g.__)(W,{periodEndDate:T});return r.createElement(i.Loading,{label:(0,g.__)(j),busy:k||D},r.createElement(s.default,{heading:r.createElement(i.Heading,{size:"h3",align:"center"},(0,g.__)(F)),question:I,reasons:l.CANCEL_SURVEY.getReasonsShortVariation(),type:_.TYPES.RADIO,onReasonChange:P,radioSelection:O,value:O,hasOtherOption:!0,onOtherTextChange:function(e){C(e),N(l.CANCEL_SURVEY.OTHER),t.handleCancelReasonChange(l.CANCEL_SURVEY.OTHER,e)},otherText:E}),r.createElement("div",{className:v.default["button-container-center"]},r.createElement(i.Button,{label:(0,g.__)(G),disabled:!1,variant:"primary",onClick:A}),r.createElement("div",{className:v.default["discount-continue-cancel-container"]},!x&&r.createElement("a",{href:"#",onClick:function(){return R(p,O)}},r.createElement("span",null,(0,g.__)(L))))))}function oe(e){var t=e.handleAbandonDiscountOffer,n=e.handleGenerateDiscountCoupon,o=e.refundedDisplayAmount,s=e.subtotalDisplayAmount,d=e.generateCouponInFlight,f=e.cancelReasonKey,m=e.cancelInFlight,h=e.isLoading,_=e.originalPrice,b=e.declinedOffer,E=b?"discount-text-price-contrast":"discount-text-price",C=b?(0,g.__)($):(0,g.__)(V),w="",S="";switch(f){case l.CANCEL_SURVEY.COST:if(b){w=(0,g.__)(J),S=r.createElement("img",{src:u.default,alt:""});break}w=(0,g.__)(q),S=r.createElement("img",{src:y.default,alt:"tags"});break;case l.CANCEL_SURVEY.OTHER:case l.CANCEL_SURVEY.TIME:default:w=(0,g.__)(H),S=r.createElement("img",{src:c.default,alt:"clock"})}var O=r.createElement("div",{className:v.default["discount-text-details"]},a.isEmpty(o)?(0,g.__)(B):(0,g.__)(Y,{refundedDisplayAmount:p.default.getDisplayPrice(o)}));return r.createElement(i.Loading,{label:(0,g.__)(j),busy:h},r.createElement(i.Heading,{size:"h3",align:"center"},w),r.createElement("div",{className:v.default["column-container"]},r.createElement("div",{className:v.default["discount-image-container"]},S),r.createElement("div",null,r.createElement(i.Text,{spacing:"1x",className:v.default["discount-secondary-header"]},C),r.createElement("div",{className:v.default["discount-price-container"]},r.createElement("span",null,(0,g.__)(X)),r.createElement("span",{className:v.default[E]},p.default.getDisplayPrice(s)),r.createElement("span",{className:v.default.price},(0,g.__)(Z)),r.createElement("span",{className:v.default["original-price"]},"$"+(_.minor/100).toFixed(2))),O)),r.createElement("div",{className:v.default["button-container-center"]},r.createElement(i.Button,{label:(0,g.__)(U),disabled:d,variant:"primary",onClick:n}),r.createElement("div",{className:v.default["discount-continue-cancel-container"]},!d&&!m&&r.createElement("a",{href:"#",onClick:t},r.createElement("span",null,(0,g.__)(L))))))}function ie(e){var t=e.periodEndDate,n=e.handleModalClose,a=e.isRefundable,o=e.handleCatalogOpen,l=a?(0,g.__)(x):(0,g.__)(D,{periodEndDate:t});return r.createElement("div",null,r.createElement(i.Heading,{size:"h3",align:"center"},(0,g.__)(A)),r.createElement("div",{className:v.default["column-container"]},r.createElement("div",{className:v.default["discount-image-container"]},r.createElement("img",{src:f.default,alt:"nanodegree"})),r.createElement(i.Text,{spacing:"1x"},l)),r.createElement("div",{className:v.default["button-container-center"]},r.createElement(i.Button,{label:(0,g.__)(K),disabled:!1,variant:"primary",onClick:o}),r.createElement("div",{className:v.default["discount-continue-cancel-container"]},r.createElement("a",{href:"#",onClick:n},r.createElement("span",null,(0,g.__)(Q))))))}function le(e){var t=e.handleCancel,n=e.handleModalClose,a=e.cancelInFlight;return r.createElement("div",null,r.createElement(i.Heading,{size:"h3",align:"center"},(0,g.__)(I)),r.createElement("div",{className:v.default["column-container"]},r.createElement("div",{className:v.default["discount-image-container"]},r.createElement("img",{src:f.default,alt:"nanodegree"})),r.createElement(i.Text,{spacing:"1x"},(0,g.__)(M))),r.createElement("div",{className:v.default["button-container-center"]},r.createElement(i.Button,{label:(0,g.__)(G),disabled:!1,variant:"primary",onClick:n}),r.createElement("div",{className:v.default["discount-continue-cancel-container"]},!a&&r.createElement("a",{href:"#",onClick:t},r.createElement("span",null,(0,g.__)(L))))))}ee.propTypes={children:h.default.children,handleCall:h.default.func.isRequired,phoneLabel:h.default.string.isRequired},te.propTypes={chatId:h.default.string.isRequired,handleChat:h.default.func.isRequired},ne.propTypes={emailAddress:h.default.string.isRequired},re.propTypes={chatId:h.default.string.isRequired,handleChat:h.default.func.isRequired},ae.propTypes={periodEndDate:h.default.string.isRequired,handleDiscountOfferEligibleOrCancel:h.default.func.isRequired,handleCancelReasonChange:h.default.func.isRequired,handleModalClose:h.default.func.isRequired,checkOfferEligibilityInFlight:h.default.bool.isRequired,cancelInFlight:h.default.bool.isRequired,isLoading:h.default.bool.isRequired,isRefundable:h.default.bool.isRequired},oe.propTypes={discountedDisplayPrice:h.default.string,refundedDisplayAmount:h.default.string.isRequired,subtotalDisplayAmount:h.default.string.isRequired,cancelReasonKey:h.default.string.isRequired,generateCouponInFlight:h.default.bool.isRequired,isLoading:h.default.bool.isRequired,handleAbandonDiscountOffer:h.default.func.isRequired,handleGenerateDiscountCoupon:h.default.func.isRequired,cancelInFlight:h.default.bool.isRequired,declinedOffer:h.default.bool.isRequired},ie.propTypes={periodEndDate:h.default.string.isRequired,handleModalClose:h.default.func.isRequired,isRefundable:h.default.bool.isRequired,handleCatalogOpen:h.default.func.isRequired},le.propTypes={handleCancel:h.default.func.isRequired,handleModalClose:h.default.func.isRequired,cancelInFlight:h.default.bool.isRequired,isLoading:h.default.bool.isRequired}}).call(this,n(11),n(1),n(4))},1991:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(28),u=p(n(0)),d=n(1761),f=n(12);function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=e(p(n(2299)).default)((l=i=function(e){function t(){return m(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"renderInputs",value:function(){switch(this.props.type){case d.TYPES.DROPDOWN:return this.renderDropdown();case d.TYPES.RADIO:return this.renderRadioOptions();case d.TYPES.TEXT_AREA:return this.renderTextArea();default:return null}}},{key:"renderDropdown",value:function(){var e=this.props,t=e.value,n=e.reasons,a=e.onDropdownChange,o=e.hiddenLabel;return r.createElement("div",{styleName:"dropdown"},r.createElement(c.Select,{id:"unpauseDate",label:(0,f.__)("Unpause subscription date"),options:n,onChange:a,value:t,required:!0,hiddenLabel:o}))}},{key:"renderTextArea",value:function(){var e=this.props,t=e.value,n=e.onTextChange;return r.createElement("div",{styleName:"text-area"},r.createElement(c.TextArea,{rows:3,hiddenLabel:!0,label:"response",id:"response",onChange:function(e){return n(e.target.value)},value:t}))}},{key:"renderRadioOptions",value:function(){var e=this.props,t=e.reasons,n=e.onOtherTextChange,o=e.onReasonChange,i=e.value,l=e.hasOtherOption,s=e.otherText;return r.createElement("ul",{styleName:"responses-container"},a.map(t,(function(e,t){return r.createElement("li",{key:t},r.createElement(c.Radio,{id:"response-"+t,name:"responses-group",label:e.translated,checked:i===e.raw,onChange:function(){o(e)}}))})),l&&r.createElement("li",{styleName:"other-reason"},r.createElement(c.Radio,{id:"responses-other",name:"responses-group",label:(0,f.__)("Other:"),checked:"Other"===i,onChange:function(){o({key:"Other",raw:"Other",translated:(0,f.__)("Other")})}}),r.createElement("input",{styleName:"other-reason-input",className:"form-control",type:"text",value:s,onChange:function(e){return n(e.target.value)},ref:"otherReason"})))}},{key:"render",value:function(){var e=this.props,t=e.heading,n=e.question;return r.createElement("div",null,t,r.createElement(c.Text,{spacing:"1x"},n),this.renderInputs())}}]),t}(r.Component),i.propTypes={question:u.default.oneOfType([u.default.string,u.default.object]).isRequired,reasons:u.default.arrayOf(u.default.oneOfType([u.default.object,u.default.string])),type:u.default.string.isRequired,heading:u.default.element,value:u.default.oneOfType([u.default.string,u.default.object]),hasOtherOption:u.default.bool,otherText:u.default.string,onOtherTextChange:u.default.func,onDropdownChange:u.default.func,onReasonChange:u.default.func,onTextChange:u.default.func},o=l))||o;t.default=_}).call(this,n(10),n(1),n(4))},1992:function(e,t,n){e.exports=n.p+"images/map-flag-1cf39.png"},1993:function(e,t,n){e.exports={body:"_assisted-cancel-followup--body--3FM3Z","image-container":"_assisted-cancel-followup--image-container--1ws1s","button-container":"_assisted-cancel-followup--button-container--iLTpR",secondary:"_assisted-cancel-followup--secondary--1LhJE",center:"_assisted-cancel-followup--center--1MAiO",subtext:"_assisted-cancel-followup--subtext--2M3Xp","button-container-right":"_assisted-cancel-followup--button-container-right--2GM-q","button-container-center":"_assisted-cancel-followup--button-container-center--17c1y","column-container":"_assisted-cancel-followup--column-container--aLsN_","discount-image-container":"_assisted-cancel-followup--discount-image-container--mx4Qi","discount-text-price":"_assisted-cancel-followup--discount-text-price--2hmtq","discount-text-price-contrast":"_assisted-cancel-followup--discount-text-price-contrast--3EmK0","discount-text-details":"_assisted-cancel-followup--discount-text-details--17jpg","discount-continue-cancel-container":"_assisted-cancel-followup--discount-continue-cancel-container--MO3kK","discount-price-container":"_assisted-cancel-followup--discount-price-container--38D8t","discount-secondary-header":"_assisted-cancel-followup--discount-secondary-header--1Ch2A",price:"_assisted-cancel-followup--price--2vhyR","original-price":"_assisted-cancel-followup--original-price--1ypvY"}},2196:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o=h(n(602)),i=h(n(2197)),l=n(50),s=h(n(2207)),c=h(n(0)),u=n(12),d=n(336),f=n(31),p=h(n(35)),m=h(n(2209));function h(e){return e&&e.__esModule?e:{default:e}}var _=(0,d.actionsBinder)("fetchSubscribedCourses");t.default=(0,f.connect)((function(e){return{courses:e.courses}}),_)(e((0,p.default)({displayName:"settings/setting-courses",propTypes:{courses:c.default.array},contextTypes:{router:c.default.object},mixins:[o.default],getDefaultProps:function(){return{courses:[]}},componentWillMount:function(){this.props.fetchSubscribedCourses()},_renderSubscribedCourses:function(){var e=this.props,t=e.courses,n=e.fetchSubscribedCourses;return r.map(t,(function(e,t){return a.createElement("li",{key:t},a.createElement(i.default,{course:e,onCancelCourse:n}))}))},render:function(){var e=this.props.courses;return a.createElement("section",{styleName:"content-container"},0===e.length?a.createElement(s.default,{enrollmentType:"course"}):a.createElement("div",null,a.createElement("h1",{styleName:"course-header"},a.createElement(l.IconCourse,{color:"green",size:"lg",title:(0,u.__)("Courses")})," ",(0,u.__)("Courses")),a.createElement("ul",null,this._renderSubscribedCourses(e))))}}),m.default))}).call(this,n(10),n(4),n(1))},2197:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a=p(n(1973)),o=p(n(602)),i=p(n(2198)),l=p(n(2200)),s=p(n(2203)),c=p(n(0)),u=n(12),d=p(n(35)),f=p(n(2206));function p(e){return e&&e.__esModule?e:{default:e}}t.default=e((0,d.default)({displayName:"settings/setting-courses/_course-card",propTypes:{course:c.default.shape({title:c.default.string.isRequired}).isRequired,onCancelCourse:c.default.func},mixins:[o.default],handleOpenCancelModal:function(){var e=a.default.getSubscriptionData(this.props.course,{category:"Cancel Subscription Attempt",label:"Cancel Subscription Attempt - Clicked"});this.track("Clicked Cancel Subscription",e)},_getFooterItems:function(){var e=this.props,t=e.course,n=e.onCancelCourse;return[{content:(0,u.__)("Remove Course"),modal:i.default,onShowModal:this.handleOpenCancelModal,modalProps:{course:t,onCancel:n}}]},render:function(){var e=this.props.course;return r.createElement(l.default,{title:e.title},r.createElement("p",null,(0,u.__)("You will not be billed for this free course.")),r.createElement(s.default,{links:this._getFooterItems()}))}}),f.default)}).call(this,n(10),n(1))},2198:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o=h(n(16)),i=h(n(1973)),l=h(n(602)),s=h(n(1777)),c=n(28),u=h(n(0)),d=n(12),f=n(31),p=h(n(35)),m=h(n(2199));function h(e){return e&&e.__esModule?e:{default:e}}t.default=(0,f.connect)(null,(function(e){return{onCancelCourse:function(t){return e(o.default.cancelCourse(t))}}}))(e((0,p.default)({displayName:"settings/setting-subscriptions/_cancel-course-modal",propTypes:{show:u.default.bool,onHide:u.default.func,course:u.default.object},mixins:[l.default],getDefaultProps:function(){return{show:!1,onHide:r.noop,course:{}}},handleCancelClick:function(){var e=this,t=this.props,n=t.course,a=t.onHide,o=t.onCancel,l={category:"Remove Course Submitted",label:"Remove Course Submitted"},s=r.extend(i.default.getCourseData(n,l));return this.props.onCancelCourse(n.key).then((function(){return e.track(l.label,s)})).then((function(){return a()})).then((function(){return o()}))},handleModalHide:function(){var e=this.props.course,t=i.default.getCourseData(e,{category:"Remove Course Attempt",label:"Remove Course Attempt - Dismissed"});this.props.onHide(),this.track("Remove Course Modal Dismissed",t)},render:function(){var e=this.props.show;return a.createElement(c.Modal,{open:e,onClose:this.handleModalHide,label:(0,d.__)("Cancel Course"),closeLabel:(0,d.__)("Close Modal")},a.createElement("div",{styleName:"modal-container"},a.createElement("h2",{styleName:"header-text-ctr"},(0,d.__)("Remove Course?")),a.createElement("p",null,(0,d.__)("You will not be billed for this free course.")),a.createElement("div",{styleName:"cancel-button"},a.createElement(s.default,{className:"btn-primary",label:(0,d.__)("Remove Course"),onClick:this.handleCancelClick})),a.createElement("a",{href:"#",onClick:this.handleModalHide},(0,d.__)("Cancel"))))}}),m.default))}).call(this,n(10),n(4),n(1))},2199:function(e,t,n){e.exports={"header-text-ctr":"_cancel-course-modal--header-text-ctr--3E5Sl form--header-text--ZDMyT","modal-container":"_cancel-course-modal--modal-container--2CeAl form--flex-column--g8OLQ","responses-container":"_cancel-course-modal--responses-container--1JOoY form--flex-column--g8OLQ","cancel-button":"_cancel-course-modal--cancel-button--3ogsX"}},2200:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(2201),o=(r=a)&&r.__esModule?r:{default:r};t.default=o.default},2201:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o,i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=u(n(0)),c=u(n(2202));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=e((i=o=function(e){function t(){var e,n,a;d(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=a=f(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),a.state={activeLink:null},a._renderTitle=function(){var e=a.props,t=e.title,n=e.faded;if(t)return r.createElement("h5",{styleName:n?"header-faded":"header"},t)},f(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){return r.createElement("div",{styleName:"card"},this._renderTitle(),this.props.children)}}]),t}(r.Component),o.displayName="settings/card",o.propTypes={children:s.default.node,faded:s.default.bool,title:s.default.node,onVersionUpdate:s.default.func},o.defaultProps={faded:!1,onVersionUpdate:a.noop},i),c.default)}).call(this,n(10),n(1),n(4))},2202:function(e,t,n){e.exports={card:"_card--card--1vaya",header:"_card--header--3XUBR form--header-text--ZDMyT","header-faded":"_card--header-faded--3xVPy form--header-text--ZDMyT"}},2203:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(2204),o=(r=a)&&r.__esModule?r:{default:r};t.default=o.default},2204:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o,i,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=d(n(0)),u=d(n(2205));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=e((i=o=function(e){function t(){var e,n,o;f(this,t);for(var i=arguments.length,s=Array(i),c=0;c<i;c++)s[c]=arguments[c];return n=o=p(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),o.state={activeLink:null},o.handleShowModal=function(e,t){e.preventDefault(),t.onShowModal&&t.onShowModal(),o.setState({activeLink:t})},o.handleHideModal=function(){var e=o.state.activeLink;e.onHideModal&&e.onHideModal(),o.setState({activeLink:null})},o._renderModal=function(){var e=o.state.activeLink;if(e)return r.createElement(e.modal,l({onHide:o.handleHideModal,show:!0},e.modalProps))},o._renderLink=function(e){return e.href?r.createElement("a",{href:e.href,target:e.target||"_self",onClick:a.defaultTo(e.onClick,a.noop),className:e.className},e.content):e.modal?r.createElement("a",{href:"#",className:e.className,onClick:function(t){return o.handleShowModal(t,e)}},e.content):r.createElement("span",null,e.content)},o._renderLinks=function(){return a.chain(o.props.links).map((function(e,t){return r.createElement("li",{key:t},o._renderLink(e))})).compact().value()},p(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"render",value:function(){return r.createElement("ul",{styleName:"link-container"},this._renderLinks(),this._renderModal())}}]),t}(r.Component),o.displayName="settings/link-list",o.propTypes={links:c.default.arrayOf(c.default.shape({content:c.default.node.isRequired,className:c.default.string,href:c.default.string,modal:c.default.any,onShowModal:c.default.func,onHideModal:c.default.func,modalProps:c.default.objectOf(c.default.any)}))},i),u.default)}).call(this,n(10),n(1),n(4))},2205:function(e,t,n){e.exports={"link-container":"_link-list--link-container--2WXGs form--link--hghHc"}},2206:function(e,t,n){e.exports={"update-link":"_course-card--update-link--fWyCI"}},2207:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(50),s=d(n(0)),c=n(12),u=d(n(2208));function d(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=e((o=a=function(e){function t(){return f(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){var e,t;return"course"===this.props.enrollmentType?(e=(0,c.__)("You currently do not have any course enrollments"),t=r.createElement(l.IconCourse,{size:"lg",color:"green"})):(e=(0,c.__)("You currently do not have any subscriptions"),t=r.createElement(l.IconNanodegree,{size:"lg",color:"cerulean"})),r.createElement("div",{styleName:"no-enroll-container"},t,r.createElement("h4",{styleName:"status-text"},e),r.createElement("a",{href:(0,c.__)("https://www.udacity.com/courses/all"),target:"_blank"},(0,c.__)("See full catalog")))}}]),t}(r.Component),a.displayName="settings/setting-subscriptions/_no-enrollment",a.propTypes={enrollmentType:s.default.string},o),u.default)}).call(this,n(10),n(1))},2208:function(e,t,n){e.exports={"no-enroll-container":"_no-enrollment--no-enroll-container--2d9-k form--flex-column--g8OLQ","status-text":"_no-enrollment--status-text--s7xE6 form--header-text--ZDMyT"}},2209:function(e,t,n){e.exports={"content-container":"setting-subscriptions--content-container--2WtjD form--flex-column--g8OLQ form--main--31YLe","link-container":"setting-subscriptions--link-container--3DvdB form--link--hghHc","_header-text":"setting-subscriptions--_header-text--3Ucr6 form--header-text--ZDMyT","subscriptions-header":"setting-subscriptions--subscriptions-header--spEhq setting-subscriptions--_header-text--3Ucr6 form--header-text--ZDMyT","course-header":"setting-subscriptions--course-header--3r5Qn setting-subscriptions--_header-text--3Ucr6 form--header-text--ZDMyT","subscription-card-china":"setting-subscriptions--subscription-card-china--3valj",link:"setting-subscriptions--link--184wB"}},2210:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o=n(12),i=h(n(16)),l=h(n(602)),s=n(28),c=h(n(360)),u=h(n(1821)),d=h(n(1759)),f=n(31),p=h(n(35)),m=h(n(2215));function h(e){return e&&e.__esModule?e:{default:e}}t.default=(0,f.connect)(null,(function(e){return{onUpdateUser:function(t){var n=t.language;return e(i.default.updateLanguage({language:n}))}}}))(e((0,p.default)({displayName:"settings/setting-language-preference",mixins:[l.default],getInitialState:function(){return{language:o.i18n.getLocale()||"",placeholder:o.i18n.getLanguage(),updating:!1}},handleCancelClick:function(){this.setState({language:o.i18n.getLocale()})},handleOptionChange:function(e){return this.setState({language:e.value,placeholder:e.label})},handleSaveClick:function(){return o.i18n._setLocale(this.state.language),c.default.setDocumentLanguage(this.state.language),this.track("Language Changed",{language:this.state.language}),this.setState({updating:!0}),this.props.onUpdateUser(r.pick(this.state,["language"]))},render:function(){var e=this.state.updating;return a.createElement("section",{styleName:"content-container"},a.createElement("div",{styleName:"main"},a.createElement("h1",{styleName:"content-header"},(0,o.__)("Language Preference")),a.createElement("form",{styleName:"drop-down"},a.createElement(d.default,{name:"Language Preference",options:r.map(o.I18N_CONSTANTS.LOCALE_MAP,(function(e,t){return{value:t,label:e}})),placeholder:this.state.placeholder,searchable:!1,clearable:!1,onChange:this.handleOptionChange}))),e?a.createElement("div",{styleName:"spinner"},a.createElement(s.Loading,{label:(0,o.__)("Loading")})):a.createElement(u.default,{onSaveClick:this.handleSaveClick,onCancelClick:this.handleCancelClick}))}}),m.default))}).call(this,n(10),n(4),n(1))},2211:function(e,t,n){e.exports={"buttons-container":"_setting-buttons--buttons-container--3qh20"}},2215:function(e,t,n){e.exports={"content-container":"setting-language-preference--content-container--3t0-2 form--flex-column--g8OLQ",main:"setting-language-preference--main--24B9l form--main--31YLe","content-header":"setting-language-preference--content-header--3b-w8 form--header-text--ZDMyT","drop-down":"setting-language-preference--drop-down--1PMaS",spinner:"setting-language-preference--spinner--13aKd"}},2216:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o,i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=_(n(624)),c=_(n(0)),u=_(n(54)),d=_(n(2217)),f=n(12),p=n(336),m=n(31),h=_(n(2219));function _(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var v=(0,p.actionsBinder)("fetchUserBase","fetchFacebookName","fetchGoogleName");t.default=(0,m.connect)((function(e){return{facebookName:u.default.State.getFacebookName(e),googleName:u.default.State.getGoogleName(e)}}),v)(e((i=o=function(e){function t(){var e,n,o;y(this,t);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return n=o=g(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.state={showDisconnectModal:null},o._refreshNamesFromProviders=function(){o.isConnectedToProvider("Facebook")&&o.props.fetchFacebookName(),o.isConnectedToProvider("Google")&&o.props.fetchGoogleName()},o.isConnectedToProvider=function(e){var t=o.props.user;return!!a.find(t.social_logins,{provider:e})},o.nameWithProvider=function(e){return"Facebook"===e?o.props.facebookName?"("+o.props.facebookName+")":"":"Google"===e?o.props.googleName?"("+o.props.googleName+")":"":void 0},o.handleProviderConnect=function(e){var t=window.location,n=(t=window.location).protocol+"//"+t.host+"/settings/linked-accounts",r=CONFIG.userApiUrl+"/me/linked_accounts/link?provider="+e.toLowerCase()+"&next="+encodeURIComponent(n);s.default.redirectTo(r)},o.handleHide=function(){o.setState({showDisconnectModal:null})},o.handleProviderDisconnect=function(e,t){t.preventDefault(),o.setState({showDisconnectModal:e})},o.renderProvider=function(e){var t=o.isConnectedToProvider(e);return r.createElement("li",{key:"provider-"+e},r.createElement("dl",null,r.createElement("dd",{styleName:t?"connected":"disconnected",title:t?"Connected":"Not Connected"},r.createElement("span",null,t?(0,f.__)("Connected"):(0,f.__)("Not Connected"))),r.createElement("dt",null,e),r.createElement("dd",null,o.nameWithProvider(e)),r.createElement("dd",{styleName:"status"},t?r.createElement("a",{href:"#",onClick:function(t){return o.handleProviderDisconnect(e,t)}},r.createElement("span",null,(0,f.__)("Disconnect"))):r.createElement("a",{href:"#",onClick:function(t){return o.handleProviderConnect(e,t)}},r.createElement("span",null,(0,f.__)("Connect"))))))},g(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"componentWillMount",value:function(){this.props.user.social_logins&&this._refreshNamesFromProviders()}},{key:"componentWillReceiveProps",value:function(e){a.isEqual(e.user.social_logins,this.props.user.social_logins)||this._refreshNamesFromProviders()}},{key:"render",value:function(){var e=this.state.showDisconnectModal,t=this.props.fetchUserBase;return r.createElement("section",{styleName:"content-container"},r.createElement("div",{styleName:"main"},r.createElement("h1",{styleName:"content-header"},(0,f.__)("Linked Accounts")),r.createElement("ul",null,this.renderProvider("Facebook"),this.renderProvider("Google")),e?r.createElement(d.default,{show:!0,onHide:this.handleHide,onDisconnect:t,provider:e}):null))}}]),t}(r.Component),o.displayName="settings/setting-linked-accounts",o.propTypes={user:c.default.object.isRequired},o.defaultProps={user:{}},i),h.default))}).call(this,n(10),n(1),n(4))},2217:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o,i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(28),c=m(n(0)),u=n(12),d=n(336),f=n(31),p=m(n(2218));function m(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=(0,f.connect)(null,(0,d.actionsBinder)("deleteSocialLogin"))(e((i=o=function(e){function t(){var e,n,r;h(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=_(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleCancelClick=function(){var e=r.props,t=e.provider,n=e.onHide,a=e.onDisconnect;return r.props.deleteSocialLogin(t).then((function(){return n()})).then((function(){return a()}))},r.handleModalHide=function(){r.props.onHide()},_(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){var e=this.props,t=e.show,n=e.provider;return r.createElement("div",{styleName:"unlink-container"},r.createElement(s.Modal,{open:t,onClose:this.handleModalHide,label:(0,u.__)("Unlink Account"),closeLabel:(0,u.__)("Close Modal")},r.createElement("div",{styleName:"modal-container"},r.createElement("div",{styleName:"header-text-ctr"},(0,u.__)("Unlink Account?")),r.createElement("p",null,(0,u.__)("Are you sure you want to unlink your <%= socialLoginProvider %> account?",{socialLoginProvider:n})),r.createElement("div",{styleName:"btn-cancel"},r.createElement(s.Button,{variant:"primary",onClick:this.handleCancelClick,label:(0,u.__)("Unlink Account"),disabled:!1,isBusy:!1})),r.createElement("a",{href:"#",onClick:this.handleModalHide},(0,u.__)("Cancel")))))}}]),t}(r.Component),o.displayName="settings/setting-linked-accounts/_unlink-account-modal",o.propTypes={show:c.default.bool,onHide:c.default.func,provider:c.default.string.isRequired,onDisconnect:c.default.func.isRequired},o.defaultProps={show:!1,onHide:a.noop,provider:"",onDisconnect:a.noop},i),p.default))}).call(this,n(10),n(1),n(4))},2218:function(e,t,n){e.exports={"unlink-container":"_unlink-account-modal--unlink-container--3Pnqt","header-text-ctr":"_unlink-account-modal--header-text-ctr--1i8gx form--header-text--ZDMyT","modal-container":"_unlink-account-modal--modal-container--25UcU form--flex-column--g8OLQ","btn-cancel":"_unlink-account-modal--btn-cancel--1p0Eo"}},2219:function(e,t,n){e.exports={"content-container":"setting-linked-accounts--content-container--3172B form--flex-column--g8OLQ",main:"setting-linked-accounts--main--1H5vk form--main--31YLe",connected:"setting-linked-accounts--connected--2gX8u",disconnected:"setting-linked-accounts--disconnected--2UM9r",status:"setting-linked-accounts--status--2jRiF","content-header":"setting-linked-accounts--content-header--2s99F form--header-text--ZDMyT"}},2220:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.SettingNotifications=void 0;var o,i,l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&l.return&&l.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=w(n(65)),d=n(245),f=n(28),p=w(n(75)),m=w(n(2221)),h=w(n(2222)),_=w(n(0)),y=w(n(639)),g=w(n(54)),v=w(n(115)),b=n(12),E=n(336),C=n(31);function w(e){return e&&e.__esModule?e:{default:e}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var N=t.SettingNotifications=(i=o=function(t){function n(){var e,t,o;S(this,n);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return t=o=O(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),o.state={projectReviewerLoaded:!1,isProjectReviewer:null},o._saveSchedulePreferences=function(e){var t=e.email,n=e.sms,i=o.props,l=i.schedules,c=i.updateSchedule,u=i.user;return r.map(a.toPairs(l),(function(e){var r=s(e,2),a=r[0],o=r[1];return c(u.id,a,o.user_timezone,t,n)}))},o._saveScheduleReminder=function(e,t){var n=o.props.schedules,r={email:a.some(n,"email"),sms:a.some(n,"sms")};return r[e]=t,o._saveSchedulePreferences({email:r.email,sms:r.sms})},o._saveNotificationPreference=function(e,t,n){var r=o.props;return(0,r.updateNotificationPreferences)(r.user.id,[{category:e,channel:t,value:n}])},o.handleSaveSetting=function(e,t,n){"studyReminders"===e&&o._saveScheduleReminder(t,n),o._saveNotificationPreference(e,t,n)},o.handleUnsubscribeAll=function(e){var t=o.props;(0,t.updateNotificationPreferencesUnsubscribeAll)(t.user.id,e),o._saveScheduleReminder(e,!1)},O(o,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),c(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.fetchNotificationPreferences,r=t.fetchSchedules,o=t.nanodegrees,i=t.user;r(i.id,a.map(o,"key")),n(i.id),y.default.isProjectReviewer().then((function(t){e.setState({projectReviewerLoaded:!0,isProjectReviewer:t})}))}},{key:"render",value:function(){var t=this,n=this.props,r=n.activeNotificationPreferenceChanges,o=n.nanodegrees,i=n.preferences,s=n.preferencesLoaded,c=n.schedules,u=n.schedulesLoaded,m=n.user,_=n.isStudentHubEnabled,y=this.state,v=y.isProjectReviewer,E=y.projectReviewerLoaded;if(!s||!u||!E)return e.createElement("div",{style:{display:"flex"}},e.createElement(f.Loading,{label:(0,b.__)("Loading")}));var C=a.some(o,p.default.isEnterprise),w=l({},i,{studyReminders:{email:a.some(c,"email"),sms:a.some(c,"sms")}});return e.createElement(d.ExternalServiceConsumer,null,(function(n){var o=n.isCareerPortalEnabled;return e.createElement(h.default,{hasSchedule:!a.isEmpty(c),isEnterprise:C,isPhoneNumberVerified:m.is_phone_number_verified,isCareerPortalEnabled:o,isProjectReviewer:v,isStudentHubEnabled:_,saveSetting:t.handleSaveSetting,savingGroups:r,settings:w,studentHubUsername:g.default.getStudentHubUsername(m),unsubscribeAll:t.handleUnsubscribeAll})}))}}]),n}(e.Component),o.displayName="settings/notifications",o.propTypes={nanodegrees:_.default.arrayOf(u.default.nanodegree),schedules:_.default.objectOf(u.default.schedule).isRequired,schedulesLoaded:_.default.bool.isRequired,user:_.default.object.isRequired,fetchSchedules:_.default.func.isRequired,activeNotificationPreferenceChanges:_.default.arrayOf(_.default.string).isRequired,fetchNotificationPreferences:_.default.func.isRequired,preferences:_.default.object,preferencesLoaded:_.default.bool.isRequired,updateNotificationPreferences:_.default.func.isRequired,updateNotificationPreferencesUnsubscribeAll:_.default.func.isRequired,updateSchedule:_.default.func.isRequired,isStudentHubEnabled:_.default.bool},i);t.default=(0,C.connect)((function(e){return{nanodegrees:g.default.State.getNanodegrees(e),activeNotificationPreferenceChanges:v.default.State.activeNotificationPreferenceChanges(e),preferences:m.default.State.preferences(e),preferencesLoaded:!v.default.State.isFetchingNotificationPreferences(e),schedules:e.schedules,schedulesLoaded:!v.default.State.isFetchingSchedules(e),isStudentHubEnabled:g.default.State.getHasStudentHub(e)}}),(0,E.actionsBinder)("fetchNotificationPreferences","fetchSchedules","updateNotificationPreferences","updateNotificationPreferencesUnsubscribeAll","updateSchedule"))(N)}).call(this,n(1),n(11),n(4))},2221:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={State:{isLoading:function(e){return e.notificationPreferences.loading},preferences:function(e){return e.notificationPreferences.preferences}}}},2222:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(2223),u=n(28),d=w(n(2225)),f=w(n(2226)),p=w(n(2227)),m=w(n(2228)),h=w(n(2229)),_=w(n(2230)),y=w(n(2231)),g=w(n(2232)),v=n(83),b=n(615),E=w(n(0)),C=n(12);function w(e){return e&&e.__esModule?e:{default:e}}var S=e(w(n(2233)).default)((l=i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleSettingsChange=function(e,t,r){var a=r.target.checked;return n.props.saveSetting(e,t,a)},n.isUnsubscribed=function(e){return!a.some(n.props.settings,(function(t){return!0===t[e]}))},n.handleUnsubscribeAllEmail=function(){n.props.unsubscribeAll("email")},n.handleUnsubscribeAllSMS=function(){n.props.unsubscribeAll("sms")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"render",value:function(){var e=this.props,t=e.hasSchedule,n=e.isEnterprise,o=e.isCareerPortalEnabled,i=e.isStudentHubEnabled,l=e.isPhoneNumberVerified,s=e.isProjectReviewer,b=e.savingGroups,E=e.settings,w=e.studentHubUsername;return r.createElement("section",{styleName:"content-container"},r.createElement("div",{styleName:"main"},r.createElement("h1",{styleName:"content-header"},(0,C.__)("Notification Preferences")),r.createElement("div",{styleName:"content-section"},r.createElement("p",{styleName:"intro-text"},(0,C.__)("Configure your notification settings by checking the delivery method you prefer. Uncheck the box if you do not wish to receive the notifications for that communication type. SMS notifications require a ")," ",r.createElement(v.Link,{to:"/settings/personal-info"},(0,C.__)("verified phone number")),". ",(0,C.__)("You may receive up to three messages per day and message rates may apply. Reply STOP to end.")),r.createElement("ul",null,t&&r.createElement(c.NotificationSettingsCard,{image:g.default,isSaving:a.includes(b,"studyReminders"),subtitle:(0,C.__)("Notify me at the time I selected in my study plan."),title:(0,C.__)("Study Reminders")},r.createElement(c.NotificationSettingsCardContent,{group:"studyReminders",settings:E.studyReminders,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"studyReminders")})),r.createElement(c.NotificationSettingsCard,{image:h.default,isSaving:a.includes(b,"paymentReminders"),subtitle:(0,C.__)("Send me messages for payment reminders."),title:(0,C.__)("Payment Reminders")},r.createElement(c.NotificationSettingsCardContent,{group:"payment_reminders",includePhone:!1,includeEmail:!1,settings:E.paymentReminders,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"paymentReminders")})),r.createElement(c.NotificationSettingsCard,{image:m.default,isSaving:a.includes(b,"learning"),subtitle:(0,C.__)("Notify me with due date reminders, check-ins and more to help me stay on track of my learning goals."),title:(0,C.__)("Learning Progress")},r.createElement(c.NotificationSettingsCardContent,{group:"learning",settings:E.learning,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"learning")})),r.createElement(c.NotificationSettingsCard,{image:p.default,isSaving:a.includes(b,"community"),subtitle:(0,C.__)("Send me personalized messages from my Community Manager about events and news in the field."),title:(0,C.__)("Community")},r.createElement(c.NotificationSettingsCardContent,{group:"community",settings:E.community,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"community")})),!n&&r.createElement(c.NotificationSettingsCard,{image:f.default,isSaving:a.some(b,(function(e){return"alumni"===e})),subtitle:(0,C.__)("Keep me connected with alumni support included in my Nanodegree program."),subsubtitle:o?(0,C.__)('Opt-out of emails from our network of Talent Program employers by <a href="https://classroom.udacity.com/profiles/u/edit">unsharing your Udacity Profile</a>.',{},{renderHTML:!0}):(0,C.__)('Opt-out of emails from our network of Talent Program employers by <a href="https://udacity.com/get-hired" target="_blank">unsharing your Udacity Profile</a>.',{},{renderHTML:!0}),title:(0,C.__)("Alumni Services")},r.createElement(c.NotificationSettingsCardContent,{title:(0,C.__)("Alumni Newsletter"),group:"alumni",settings:E.alumni,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"alumni")})),i&&r.createElement(c.NotificationSettingsCard,{image:y.default,isSaving:a.some(b,(function(e){return a.startsWith(e,"studentHub")})),subtitle:(0,C.__)("Notify me when I am mentioned by classmates and mentors."),title:(0,C.__)("Student Hub")},r.createElement(c.NotificationSettingsCardContent,{title:w,subtitle:(0,C.__)("Messages tagging me directly in any channel"),group:"studentHubMe",settings:E.studentHubMe,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"studentHubMe")}),r.createElement(c.NotificationSettingsCardContent,{title:(0,C.__)("Direct Messages"),subtitle:(0,C.__)("Unread messages sent directly to me"),group:"studentHubDirect",settings:E.studentHubDirect,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"studentHubDirect")}),r.createElement(c.NotificationSettingsCardContent,{title:(0,C.__)("@channel"),subtitle:(0,C.__)("Messages tagging the whole channel"),group:"studentHubChannel",settings:E.studentHubChannel,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"studentHubChannel")})),s&&r.createElement(c.NotificationSettingsCard,{image:_.default,isSaving:a.includes(b,"reviews"),subtitle:(0,C.__)("Send me notifications when I am assigned a review."),title:(0,C.__)("Project Reviews")},r.createElement(c.NotificationSettingsCardContent,{group:"reviews",settings:E.reviews,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"reviews")})),r.createElement(c.NotificationSettingsCard,{image:d.default,isSaving:a.some(b,(function(e){return a.startsWith(e,"marketing")})),subtitle:(0,C.__)("Learn about new courses and programs, scholarship opportunities and upcoming special events."),title:(0,C.__)("Marketing Communications")},r.createElement(c.NotificationSettingsCardContent,{title:(0,C.__)("Upcoming special events and webinars"),group:"marketingEvents",includePhone:!0,settings:E.marketingEvents,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"marketingEvents")}),r.createElement(c.NotificationSettingsCardContent,{title:(0,C.__)("New courses and Nanodegree programs"),group:"marketingNewContent",includePhone:!0,settings:E.marketingNewContent,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"marketingNewContent")}),r.createElement(c.NotificationSettingsCardContent,{title:(0,C.__)("Scholarship opportunities"),group:"marketingScholarships",includePhone:!0,settings:E.marketingScholarships,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"marketingScholarships")}),r.createElement(c.NotificationSettingsCardContent,{title:(0,C.__)("Surveys to improve my experience"),group:"marketingSurveys",includePhone:!0,settings:E.marketingSurveys,isPhoneNumberVerified:l,handleChange:a.partial(this.handleSettingsChange,"marketingSurveys")}))),r.createElement("div",{styleName:"unsubscribe-all"},r.createElement(u.Checkbox,{label:(0,C.__)("Unsubscribe me from all Udacity email notifications"),id:"unsubscribe-email",checked:this.isUnsubscribed("email"),onChange:this.handleUnsubscribeAllEmail}),r.createElement(u.Checkbox,{label:(0,C.__)("Unsubscribe me from all Udacity SMS notifications"),id:"unsubscribe-sms",checked:this.isUnsubscribed("sms"),onChange:this.handleUnsubscribeAllSMS})))))}}]),t}(r.Component),i.displayName="settings/_notifications",i.propTypes={hasSchedule:E.default.bool.isRequired,isCareerPortalEnabled:E.default.bool.isRequired,isEnterprise:E.default.bool.isRequired,isPhoneNumberVerified:E.default.bool.isRequired,isProjectReviewer:E.default.bool.isRequired,isStudentHubEnabled:E.default.bool.isRequired,saveSetting:E.default.func.isRequired,savingGroups:E.default.arrayOf(E.default.string).isRequired,settings:b.NotificationPreferencesPropType.isRequired,studentHubUsername:E.default.string.isRequired,unsubscribeAll:E.default.func.isRequired},o=l))||o;t.default=S}).call(this,n(10),n(1),n(4))},2223:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.NotificationSettingsCard=t.NotificationSettingsCardContent=void 0;var o,i,l,s,c,u,d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(28),p=n(50),m=n(615),h=g(n(0)),_=n(12),y=g(n(2224));function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.NotificationSettingsCardContent=e(y.default)((l=i=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.group,n=e.includeEmail,o=void 0===n||n,i=e.includePhone,l=void 0!==i&&i,s=e.skipPhoneVerification,c=void 0!==s&&s,u=e.isPhoneNumberVerified,d=e.settings,m=e.handleChange,h=e.title,y=e.subtitle,g=!c&&!u;return r.createElement("dl",{styleName:l?"wide":null},r.createElement("div",{styleName:"title"},r.createElement("dt",{styleName:h?null:"hide-title"},h||(0,_.__)("Delivery Method:"),y&&r.createElement("div",{styleName:"subtitle"},y))),r.createElement("div",{styleName:"options"},l&&r.createElement("dd",null,r.createElement(f.Checkbox,{label:(0,_.__)("Phone call"),id:t+"-delivery-phone",checked:a.get(d,"phone"),disabled:!c&&!u,onChange:a.partial(m,"phone")})),o&&r.createElement("dd",null,r.createElement(f.Checkbox,{label:(0,_.__)("Email"),id:t+"-delivery-email",checked:a.get(d,"email"),onChange:a.partial(m,"email")})),r.createElement("dd",null,r.createElement(f.Checkbox,{label:(0,_.__)("SMS"),id:t+"-delivery-sms",checked:a.get(d,"sms"),disabled:!c&&!u,onChange:a.partial(m,"sms")}),g&&r.createElement(f.Tooltip,{trigger:r.createElement(p.IconWarning,{size:"md",color:"orange"}),direction:"end",content:(0,_.__)("Phone number is missing and/or unverified.")}))))}}]),t}(r.Component),i.displayName="settings/notification-settings-card-content",i.propTypes={group:h.default.string.isRequired,handleChange:h.default.func.isRequired,includeEmail:h.default.bool,includePhone:h.default.bool,isPhoneNumberVerified:h.default.bool.isRequired,settings:m.NotificationPreferencePropType.isRequired,skipPhoneVerification:h.default.bool,subtitle:h.default.string,title:h.default.string},i.defaultProps={settings:{}},o=l))||o,t.NotificationSettingsCard=e(y.default)((u=c=function(e){function t(){var e,n,r;v(this,t);for(var a=arguments.length,o=Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={justSaved:!1},b(r,n)}return E(t,e),d(t,[{key:"componentDidUpdate",value:function(e){var t=this;e.isSaving&&!this.props.isSaving&&(this.setState({justSaved:!0}),setTimeout((function(){t.setState({justSaved:!1})}),1e3))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.image,a=e.isSaving,o=e.subsubtitle,i=e.subtitle,l=e.title,s=this.state.justSaved;return r.createElement("li",{styleName:"item-active"},r.createElement("div",{styleName:"item-header"},a&&r.createElement("div",{styleName:"saving-notice"},r.createElement(p.IconCheckCircled,{size:"md",color:"orange"}),(0,_.__)("Saving...")),s&&r.createElement("div",{styleName:"saved-notice"},r.createElement(p.IconCheckCircled,{size:"md",color:"green"}),(0,_.__)("Saved!")),r.createElement("div",{styleName:"item-title"},r.createElement("span",{style:{backgroundImage:"url("+n+")"}},l),r.createElement("div",{styleName:"title-text"},r.createElement("h2",null,l),r.createElement("p",null,i),o&&r.createElement("p",{styleName:"subsubtitle"},o)))),r.createElement("div",{styleName:"item-footer"},t))}}]),t}(r.Component),c.displayName="settings/notification-settings-card",c.propTypes={children:h.default.node,image:h.default.string.isRequired,isSaving:h.default.bool.isRequired,subtitle:h.default.string.isRequired,subsubtitle:h.default.element,title:h.default.string.isRequired},s=u))||s}).call(this,n(10),n(1),n(4))},2224:function(e,t,n){e.exports={"item-active":"_notification-settings-card--item-active--aYKAW","item-inactive":"_notification-settings-card--item-inactive--pJZu3","item-header":"_notification-settings-card--item-header--1V4kt","saved-notice":"_notification-settings-card--saved-notice--3dKpT","saving-notice":"_notification-settings-card--saving-notice--1ds1g","item-title":"_notification-settings-card--item-title--2v-8k","title-text":"_notification-settings-card--title-text--xTZhH",subsubtitle:"_notification-settings-card--subsubtitle--19m9r","item-footer":"_notification-settings-card--item-footer--2pLca","hide-title":"_notification-settings-card--hide-title--3ilQ_",title:"_notification-settings-card--title--1BlGY",options:"_notification-settings-card--options--GNEYl",wide:"_notification-settings-card--wide--1I-Q5",subtitle:"_notification-settings-card--subtitle--kHPR0",select:"_notification-settings-card--select--2u2wq"}},2225:function(e,t,n){e.exports=n.p+"images/bullhorn-f52ab.png"},2226:function(e,t,n){e.exports=n.p+"images/careers-0b2b5.png"},2227:function(e,t,n){e.exports=n.p+"images/community-409af.png"},2228:function(e,t,n){e.exports=n.p+"images/learning-progress-eb887.png"},2229:function(e,t,n){e.exports=n.p+"images/payment-a92ac.png"},2230:function(e,t,n){e.exports=n.p+"images/reviews-32531.png"},2231:function(e,t,n){e.exports=n.p+"images/study-group-e3194.png"},2232:function(e,t,n){e.exports=n.p+"images/study-reminder-3db08.png"},2233:function(e,t,n){e.exports={"content-container":"_notifications--content-container--1sHja form--flex-column--g8OLQ",main:"_notifications--main--1u4xn form--main--31YLe","content-header":"_notifications--content-header--c1Yag form--header-text--ZDMyT","content-section":"_notifications--content-section--VDHOH","intro-text":"_notifications--intro-text--1fILA","unsubscribe-all":"_notifications--unsubscribe-all--2NqR5"}},2234:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.SettingPassword=void 0;var o,i,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(28),u=g(n(0)),d=g(n(1821)),f=g(n(168)),p=n(12),m=n(336),h=n(31),_=g(n(1974)),y=g(n(2235));function g(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=t.SettingPassword=e(y.default)((l=i=function(e){function t(){var e,n,r;v(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={currentPassword:"",newPassword:"",newPasswordRetype:"",isCurrentPasswordValid:!0,isNewPasswordValid:!0,areNewPasswordsMatching:!0},r._clearErrors=function(){r.setState({isCurrentPasswordValid:!0,isNewPasswordValid:!0,areNewPasswordsMatching:!0})},r._clearFields=function(){r.setState({currentPassword:"",newPassword:"",newPasswordRetype:""}),r._clearErrors()},r.handleCurrentPasswordChange=function(e){r.setState({currentPassword:a.get(e,"target.value")})},r.handleNewPasswordChange=function(e){var t=a.get(e,"target.value"),n=r._validateNewPassword(t);r.setState({newPassword:t,isNewPasswordValid:n})},r.handleRetypePasswordChange=function(e){var t=r.state.newPassword,n=a.get(e,"target.value"),o=t===n;r.setState({newPasswordRetype:n,areNewPasswordsMatching:o})},r.handleSaveClick=function(){r._clearErrors();var e=r.state,t=e.currentPassword,n=e.newPassword,a=e.isNewPasswordValid,o=e.areNewPasswordsMatching;if(a&&o)return f.default.resetPassword(t,n).then((function(){r._clearFields(),r.props.createNotificationAlert((0,p.__)("Password changed successfully"))})).catch((function(){r.props.createErrorAlert("Unable to change your password"),r.setState({isCurrentPasswordValid:!1})}))},b(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"_validateNewPassword",value:function(e){return(0,_.default)(e,6,50)}},{key:"render",value:function(){var e=this.state,t=e.isCurrentPasswordValid,n=e.isNewPasswordValid,a=e.areNewPasswordsMatching,o=r.createElement(c.TextInput,{id:"current",label:"current",hiddenLabel:!0,value:this.state.currentPassword,onChange:this.handleCurrentPasswordChange,placeholder:(0,p.__)("Current Password"),type:"password",validation:t?null:r.createElement(c.FormValidation,{message:(0,p.__)("Password entered is incorrect")})}),i=r.createElement(c.TextInput,{id:"new",label:"new",hiddenLabel:!0,value:this.state.newPassword,onChange:this.handleNewPasswordChange,placeholder:(0,p.__)("New Password"),type:"password",validation:n?null:r.createElement(c.FormValidation,{message:(0,p.__)("New password must be at least 6 characters")})}),l=r.createElement(c.TextInput,{id:"verify",label:"verify",hiddenLabel:!0,value:this.state.newPasswordRetype,onChange:this.handleRetypePasswordChange,placeholder:(0,p.__)("Verify Password"),type:"password",validation:a?null:r.createElement(c.FormValidation,{message:(0,p.__)("Passwords must match")})});return r.createElement("section",{styleName:"content-container"},r.createElement("div",null,r.createElement("div",{styleName:"main"},r.createElement("div",{styleName:"password-container"},r.createElement("h1",{styleName:"content-header"},(0,p.__)("Change Password")),o,i,l)),r.createElement(d.default,{isSaveEnabled:a&&n,onSaveClick:this.handleSaveClick,onCancelClick:this._clearFields})))}}]),t}(r.Component),i.displayName="settings/setting-password",i.propTypes={createErrorAlert:u.default.func.isRequired,createNotificationAlert:u.default.func.isRequired},o=l))||o,C=(0,m.actionsBinder)("createErrorAlert","createNotificationAlert");t.default=(0,h.connect)(null,C)(E)}).call(this,n(10),n(1),n(4))},2235:function(e,t,n){e.exports={"content-container":"setting-password--content-container--5NJZH form--flex-column--g8OLQ",main:"setting-password--main--1_2rn form--main--31YLe","password-container":"setting-password--password-container--1y6dQ form--flex-column--g8OLQ","content-header":"setting-password--content-header--2vsPV form--header-text--ZDMyT","input-field":"setting-password--input-field--1lvAg form--input-field--1iAH4","error-field":"setting-password--error-field--1ii73 setting-password--input-field--1lvAg form--input-field--1iAH4 form--error-field--10p67"}},2236:function(e,t,n){"use strict";(function(e,r,a,o){Object.defineProperty(t,"__esModule",{value:!0}),t.SettingPersonalInfo=void 0;var i,l,s,c,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=n(28),p=R(n(16)),m=R(n(103)),h=R(n(1886)),_=R(n(1887)),y=n(1823),g=R(n(1890)),v=n(50),b=R(n(2237)),E=R(n(0)),C=R(n(1821)),w=R(n(168)),S=n(12),O=n(31),N=R(n(2239)),P=R(n(1974)),T=R(n(2242));function R(e){return e&&e.__esModule?e:{default:e}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}var x=t.SettingPersonalInfo=r(T.default)((s=l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));c.call(n);var r=n.props.user,o=r.first_name,i=r.last_name,l=r.email,s=r.phone_number,u=r.is_phone_number_verified,d=r.photo_url;return n.state={firstName:o||"",lastName:i||"",email:l||"",newEmail:"",showNewEmailInput:!1,password:"",phoneNumber:s||"",isPhoneNumberVerified:u,isValidMap:{firstName:!0,lastName:!0,email:!0,password:!0,newEmail:!0,phoneNumber:!0},showAvatarOverlay:!1,committed:{avatarUrl:d||""},transacting:null},n.fileInputRef=a.createRef(),n}var n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),d(t,[{key:"componentDidMount",value:(n=A(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.user.hasOwnProperty("photo_url")){e.next=3;break}return e.next=3,this.props.getHubUser();case 3:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e){o.isEqual(e.user,this.props.user)||this.setState(this._stateFromProps(this.props))}},{key:"_clearErrors",value:function(){this.setState({isValidMap:{firstName:!0,lastName:!0,email:!0,password:!0,newEmail:!0,phoneNumber:!0},showNewEmailInput:!1})}},{key:"_createNewUserObject",value:function(){var e=this.state,t=e.firstName,n=e.lastName,r=e.email,a=e.password,o=this.props.user,i={};return r!==o.email&&(i.email=r,i.password=a),t!==o.first_name&&(i.firstName=t),n!==o.last_name&&(i.lastName=n),i}},{key:"_getInputStyleName",value:function(e){return e?"field":"error-field"}},{key:"handleFieldChange",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t(n);this.setState((function(t){var o,i=t.isValidMap;return u((k(o={},e,n),k(o,"isValidMap",u({},i,k({},e,a))),o),r)}))}},{key:"handlePhoneChange",value:function(e,t){this.setState((function(n){var r=n.isValidMap;return{phoneNumber:e,isPhoneNumberVerified:t,isValidMap:u({},r,{phoneNumber:!0})}}))}},{key:"_isValid",value:function(){var e=this._createNewUserObject();return o.every(o.values(this.state.isValidMap))&&!o.isEmpty(e)||this._pendingAvatarUpdate()}},{key:"_validateEmail",value:function(e){return(0,N.default)(e)}},{key:"_validateName",value:function(e){return(0,P.default)(e,1,50)}},{key:"_validatePassword",value:function(e){return!!e&&(0,P.default)(e,6,50)}},{key:"_stateFromProps",value:function(e){var t=e.user;return{firstName:t.first_name,lastName:t.last_name,email:t.email,newEmail:"",password:"",showNewEmailInput:!1,committed:{avatarUrl:t.photo_url||""}}}},{key:"_rollback",value:function(){this.setState(u({},this._stateFromProps(this.props),{transacting:null}))}},{key:"_getAvatar",value:function(){var e=this.state,t=e.transacting,n=e.committed.avatarUrl;return t&&t.hasOwnProperty("avatarUrl")?t.avatarUrl:n}},{key:"_isSetToDefault",value:function(){return this.state.committed&&(""===this.state.committed.avatarUrl||null===this.state.committed.avatarUrl)}},{key:"_setAvatar",value:function(e){var t=null===e&&this._isSetToDefault();this.setState((function(n){return u({},n,{transacting:t?null:u({},n.transacting,{avatarUrl:e})})}))}},{key:"_commitAvatar",value:function(){var e=this;this.setState((function(t){return{committed:u({},t.committed,{avatarUrl:e._getAvatar()}),transacting:null}}))}},{key:"_pendingAvatarUpdate",value:function(){return null!==this.state.transacting}},{key:"_createNewHubUser",value:function(){var e=this.state.transacting;if(!o.isNil(e))return{avatarUrl:e.avatarUrl,showToast:!0}}},{key:"renderNewEmailFields",value:function(){var e=this,t=this.state,n=t.isValidMap,r=t.password,o=t.newEmail;return!!t.showNewEmailInput&&[a.createElement("div",{key:"new-email"},a.createElement("p",null,(0,S.__)("To change your email, re-enter your new email address, below")),a.createElement("label",{htmlFor:"newEmailInput"},(0,S.__)("Email Address")),a.createElement("input",{id:"newEmailInput",styleName:this._getInputStyleName(n.newEmail),type:"text",value:o,onChange:function(t){return e.handleFieldChange("newEmail",e._validateNewEmail,t.target.value)},placeholder:(0,S.__)("Email Address")})),a.createElement("div",{key:"password"},a.createElement("label",{htmlFor:"passwordInput"},(0,S.__)("Password")),a.createElement("input",{id:"passwordInput",styleName:this._getInputStyleName(n.password),value:r,onChange:function(t){return e.handleFieldChange("password",e._validatePassword,t.target.value)},placeholder:(0,S.__)("Password"),type:"password"}))]}},{key:"renderPhoneNumberFields",value:function(){var e=this,t=this.props.user,n=this.state,r=n.isPhoneNumberVerified,o=n.phoneNumber;return a.createElement(h.default,{number:o,userKey:t.id,verified:r,onChange:function(t,n){return e.handlePhoneChange(t,n)}})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isValidMap,r=t.firstName,i=t.lastName,l=t.email,s=t.showAvatarOverlay,c=t.showNewEmailInput,u=this.props.user;return a.createElement("ul",null,a.createElement("li",null,a.createElement("section",{styleName:"content-container"},a.createElement("div",{styleName:"main"},a.createElement("h1",{styleName:"content-header"},(0,S.__)("Basic Information")),a.createElement("div",{styleName:"id-container"},a.createElement("div",{styleName:"id-left"},a.createElement("div",{"data-tst":"avatar-overlay",role:"button","aria-pressed":"false","aria-label":"Upload Avatar",tabIndex:"0",styleName:"avatar-overlay",onMouseEnter:this.handleShowAvatarOverlay,onMouseLeave:this.handleHideAvatarOverlay,onClick:this.handleChangeAvatar,onKeyPress:this.handleAvatarOnEnter},s&&a.createElement(f.Heading,{size:"h6",color:"white",spacing:"none"},"Change")),a.createElement(_.default,{firstName:r,lastName:i,avatarUrl:this._getAvatar(),userId:u.id,sizeSelection:"xl"}),a.createElement(f.Button,{label:"Default to identicon",variant:"minimal",onClick:this.handleSetDefault,icon:a.createElement(v.IconTrash,null),iconOnly:!0}),a.createElement(f.VisuallyHidden,null,a.createElement("input",{ref:this.fileInputRef,type:"file",id:"avatar",name:"avatar","aria-label":"Avatar File",accept:y.FILE_TYPES.join(", "),onChange:this.handleAddFile}))),a.createElement("div",{styleName:"id-right"},a.createElement("label",{htmlFor:"firstNameInput"},(0,S.__)("First Name")),a.createElement("input",{id:"firstNameInput",styleName:this._getInputStyleName(n.firstName),type:"text",value:r,onChange:function(t){return e.handleFieldChange("firstName",e._validateName,t.target.value)},placeholder:(0,S.__)("First Name")}),a.createElement("label",{htmlFor:"lastNameInput"},(0,S.__)("Last Name")),a.createElement("input",{id:"lastNameInput",styleName:this._getInputStyleName(n.lastName),type:"text",value:i,onChange:function(t){return e.handleFieldChange("lastName",e._validateName,t.target.value)},placeholder:(0,S.__)("Last Name")}))),this.renderPhoneNumberFields(),a.createElement("label",{htmlFor:"emailInput"},(0,S.__)("Email Address")),a.createElement("div",{styleName:"email-container"},a.createElement("input",{id:"emailInput",styleName:this._getInputStyleName(n.email),type:"text",value:l,onChange:function(t){return e.handleFieldChange("email",e._validateEmail,t.target.value,{showNewEmailInput:!0})},placeholder:(0,S.__)("Email Address")}),!u.is_email_verified&&!c&&a.createElement(f.Button,{label:(0,S.__)("Verify email"),onClick:this.handleVerifyEmailClick,testID:"verify-email-button"})),this.renderNewEmailFields()),a.createElement(C.default,{"data-tst":"setting-buttons",onSaveClick:this.handleSaveClick,onCancelClick:this.handleCancelClick,isSaveEnabled:this._isValid()}))),a.createElement("li",null,a.createElement(b.default,{userId:u.id,emailAddress:l,rightToAccess:u.right_to_access,accountDeleteState:o.get(u,"settings.account_delete_state")})))}}]),t}(a.Component),l.displayName="settings/setting-personal-info",l.propTypes={createNotificationAlert:E.default.func.isRequired,updateUser:E.default.func.isRequired,user:E.default.object.isRequired,updateHubUser:E.default.func},l.defaultProps={user:{}},c=function(){var t,n=this;this._validateNewEmail=function(e){var t=n.state.email;return!e||(0,N.default)(e)&&e===t},this.handleCancelClick=function(){n._rollback(),n._clearErrors()},this.handleVerifyEmailClick=A(regeneratorRuntime.mark((function e(){var t,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props,r=t.createErrorAlert,a=t.createNotificationAlert,o=n.state.email,w.default.requestEmailVerification().then((function(){a((0,S.__)("A verification email has been sent to <%= email %>",{email:o}))})).catch((function(){r((0,S.__)("Could not send a verification email to <%= email %>",{email:o}))}));case 3:case"end":return e.stop()}}),e,n)}))),this.handleSaveClick=A(regeneratorRuntime.mark((function t(){var r,a,i,l,s,c,u,d,f,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.props,a=r.updateUser,i=r.updateHubUser,l=r.user,s=n.state,c=s.newEmail,u=s.showNewEmailInput,d=n._createNewUserObject(),f=n._createNewHubUser(),p=[],o.isEmpty(d)||p.push(a(d)),o.isEmpty(f)||p.push(i(f)),e.all(p).then((function(e){u&&d.email&&(e.email===c&&n.props.createNotificationAlert((0,S.__)("Please check your email to confirm your new email address")),n.setState({newEmail:"",password:"",showNewEmailInput:!1})),f&&(n._commitAvatar(),""!==f.avatarUrl&&m.default.track("Uploaded Avatar",{user_id:l.id}))}));case 8:case"end":return t.stop()}}),t,n)}))),this.handleShowAvatarOverlay=function(){return n.setState({showAvatarOverlay:!0})},this.handleHideAvatarOverlay=function(){return n.setState({showAvatarOverlay:!1})},this.handleChangeAvatar=function(){return n.fileInputRef&&n.fileInputRef.current.click()},this.handleAvatarOnEnter=function(e){"Enter"!==e.key&&" "!==e.key||n.handleChangeAvatar()},this.handleSetDefault=function(){""!==n.state.committed.avatarUrl?n._setAvatar(""):n._setAvatar(null)},this._previewAvatarFile=(t=A(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g.default.verifyPhotoFile(t),e.next=4,g.default.getImagePreview(t);case 4:r=e.sent,n._setAvatar(r),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),n.props.createErrorAlert(e.t0.message);case 11:case"end":return e.stop()}}),e,n,[[0,8]])}))),function(e){return t.apply(this,arguments)}),this.handleAddFile=function(e){var t=e.target.files;n._previewAvatarFile(t),e.target.value=null}},i=s))||i,D=p.default.createNotificationAlert,I=p.default.createErrorAlert,M=p.default.updateUser,L=p.default.updateHubUser,U=p.default.getHubUser;t.default=(0,O.connect)(null,{createNotificationAlert:D,createErrorAlert:I,updateUser:M,updateHubUser:L,getHubUser:U})(x)}).call(this,n(11),n(10),n(1),n(4))},2237:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalData=void 0;var o,i,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(28),u=n(50),d=E(n(16)),f=E(n(43)),p=E(n(1777)),m=n(1851),h=E(n(0)),_=E(n(168)),y=n(12),g=n(31),v=n(348),b=E(n(2238));function E(e){return e&&e.__esModule?e:{default:e}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S={ELIGIBLE:"eligible",INELIGIBLE_NOT_VERIFIED:"ineligible_not_verified",INELIGIBLE_NOT_EU:"ineligible_not_eu",INELIGIBLE_NOT_SELF:"ineligible_not_self"},O="NOT_REQUESTED",N="REQUESTED",P="VERIFIED",T="CONFIRMED",R={ACCOUNT_DELETE_ERROR:"An error occured while trying to delete your data. Please try again in a few minutes.",ACCOUNT_NOT_FOUND:"Unable to fulfill account data deletion request. We could not find your user account",CODE_MISMATCH:"Code does not match. Please enter the code from your email.",CODE_NOT_REQUESTED:"Unable to verify request code. You need to request the code first.",CODE_NOT_VERIFIED:"Unable to fulfill account data deletion request. You need to first verify your deletion request code.",INTERNAL_ERROR:"There was an error processing your request. Please try again in a few minutes."},k=t.PersonalData=e(b.default)((l=i=function(e){function t(){var e,n,o;C(this,t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return n=o=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.state={verificationRequestSent:!1,accountDeleteState:o.props.accountDeleteState,showDeleteModal:!1,deleteCode:""},o.handleSendEmailVerification=function(){return _.default.requestEmailVerification().then((function(){o.setState({verificationRequestSent:!0})}))},o.handleDeleteRequestCode=function(){var e=o.props.createWarningAlert;return _.default.requestDeleteAccountCode().then((function(t){t.error?e((0,y.__)(R[t.error.code])):o.setState({accountDeleteState:t.account_delete_state})})).catch((function(t){(0,v.reportError)(t),e((0,y.__)("We had some trouble sending your delete code. Please try again in a few minutes."))}))},o.handleRequestData=function(){var e=o.props,t=e.createNotificationAlert,n=e.createWarningAlert;return _.default.createRightToAccessRequest().then((function(){t((0,y.__)("Your request has been sent. Please look out for our email."))})).catch((function(e){(0,v.reportError)(e),n((0,y.__)('We had some trouble sending the information you requested. <a href=https://udacity.zendesk.com/hc/en-us/requests/new target="_blank">Report an Issue</a>'))}))},o.confirmDelete=function(){o.setState({showDeleteModal:!0})},o.cancelDelete=function(){o.setState({showDeleteModal:!1})},o.deleteUser=function(){var e=o.props.createWarningAlert;_.default.deleteAccount().then((function(t){t.error?(o.cancelDelete(),e((0,y.__)("We had some trouble deleting your data. Please try again in a few minutes."))):(o.setState({accountDeleteState:t.account_delete_state,showDeleteModal:!1}),f.default.signOut())})).catch((function(t){(0,v.reportError)(t),o.cancelDelete(),e((0,y.__)("We had some trouble deleting your data. Please try again in a few minutes."))}))},o.renderDeleteModal=function(){var e=o.state.showDeleteModal;return r.createElement(c.Modal,{open:e,onClose:o.cancelDelete,label:(0,y.__)("Confirm Account Deletion"),closeLabel:(0,y.__)("Cancel Account Deletion")},r.createElement("div",{styleName:"delete-modal"},r.createElement(u.IconWarning,{size:"lg",color:"red"}),r.createElement("span",{styleName:"warning-confirm"},(0,y.__)("Are you sure you want to delete all your data and close your account?")),r.createElement("span",{styleName:"warning-text"},(0,y.__)("This action is irreversible and your information will be lost.")),r.createElement("div",{styleName:"actions"},r.createElement(c.Button,{label:(0,y.__)("No, Don't"),onClick:o.cancelDelete,variant:"secondary"}),r.createElement(c.Button,{label:(0,y.__)("Yes, Delete"),onClick:o.deleteUser,variant:"destructive"}))))},o.handleDeleteRequestCodeInput=function(e){var t=e.target.value;o.setState({deleteCode:t})},o.handleVerifyCode=function(){var e=o.state.deleteCode,t=o.props.createWarningAlert;_.default.verifyDeleteAccountCode(e).then((function(e){e.error?t((0,y.__)(R[e.error.code])):o.setState({accountDeleteState:e.account_delete_state})})).catch((function(e){(0,v.reportError)(e),t((0,y.__)("We had some trouble verifiying your delete code. Please try again in a few minutes."))}))},o.renderAccountDeletionConfirmation=function(){return r.createElement("p",null,(0,y.__)("Your account is being deleted. You will be unable to access this account shortly."))},o.renderAccountDeletionStep=function(){var e=o.state.accountDeleteState;return r.createElement("div",null,r.createElement("p",null,(0,y.__)("To permanently delete your data across all Udacity applications and close your account, please click on the Delete My Account button.")),r.createElement("div",{styleName:"flex-col--justify-start-align-start"},e===P&&r.createElement("div",null,r.createElement("span",null,r.createElement(u.IconCheckCircled,{color:"green",title:"success"})),r.createElement("span",null,(0,y.__)("Request Verified"))),r.createElement("div",{id:"delete-account",styleName:"cta-button"},r.createElement(c.Button,{className:"delete-account-btn",label:(0,y.__)("Delete My Account"),onClick:o.confirmDelete,variant:"destructive"}))))},o.renderRequestAccountDeletionCodeStep=function(){var e=o.state.accountDeleteState,t=!e||e===O;return r.createElement("div",{styleName:"cta-button"},t&&r.createElement("div",null,r.createElement("p",null,r.createElement("strong",null,(0,y.__)("NOTE: You must cancel any active enrollments prior to deleting your account, to avoid any future charges."))),r.createElement("p",null,(0,y.__)("Before deleting your account, please review the following:")),r.createElement("p",null,r.createElement("ul",{styleName:"delete-warnings-list"},r.createElement("li",null," ",(0,y.__)("If you delete your account, all of your personal information, including enrollments and certificates, will be deleted. You will immediately lose access to your account and be unable to log in.")),r.createElement("li",null," ",(0,y.__)("This action is irreversible - once your data has been deleted, we cannot recover it again.")),r.createElement("li",null,(0,y.__)("You will not be able to sign up again using the same email address for 30 days.")))),r.createElement("p",null,(0,y.__)("To prevent account deletion by accident, we have a 2-step verification process. Click below to get a delete code sent to your email. Use that code to verify your request and to continue with the deletion process."))),e===N&&r.createElement("div",{styleName:"notification"},r.createElement("span",null,(0,y.__)("An email with a code has been sent to your email address. Copy and paste the code below to confirm that you would like to proceed to delete your account data."))),r.createElement("div",{className:[b.default["flex-col--justify-start-align-start"],b.default["delete-request-verification"]].join(" ")},e===N&&r.createElement("div",{styleName:"flex-row--justify-start-align-center"},r.createElement("input",{type:"text",styleName:"delete-code-input",onChange:o.handleDeleteRequestCodeInput,placeholder:(0,y.__)("Enter Delete Code"),maxLength:32}),r.createElement(p.default,{className:"verify-code-btn",onClick:o.handleVerifyCode,variant:"primary",label:(0,y.__)("Verify Code")})),r.createElement(p.default,{onClick:o.handleDeleteRequestCode,variant:"secondary",label:t?(0,y.__)("Send Delete Code"):(0,y.__)("Re-send Delete Code")})))},o.renderDataAccessEligible=function(){var e=o.props,t=e.rightToAccess,n=e.emailAddress;a.includes([S.ELIGIBLE,S.INELIGIBLE_NOT_VERIFIED],t);return r.createElement("div",null,r.createElement("div",{styleName:"email-verified"},r.createElement(u.IconCheckCircled,{color:"green",title:"success"}),r.createElement("div",{styleName:"email-verified-text"},r.createElement("span",null,(0,y.__)("Click the Request Data button to have a copy of your data sent to your email"),": ",r.createElement("strong",null,n)))),r.createElement("div",{styleName:"request-data"},r.createElement(p.default,{onClick:o.handleRequestData,variant:"secondary",label:(0,y.__)("Request Data")})))},o.renderDataAccessVerifyEmail=function(){var e=o.state.verificationRequestSent;return r.createElement("div",null,r.createElement("p",null,(0,y.__)("Verify your email address so that we send your data to the correct place.")),r.createElement("div",{styleName:"cta-button"},r.createElement(p.default,{onClick:o.handleSendEmailVerification,variant:"secondary",label:(0,y.__)("Send Verification")}),e?r.createElement(m.MinimalCard,{intent:"warning",summary:(0,y.__)("An email has been sent to your email address. When you have completed the instructions please return to this page and refresh it to continue to the next step.")}):null))},o.renderRequestAccessData=function(){var e=o.props.rightToAccess===S.ELIGIBLE;return r.createElement("div",null,r.createElement("h1",{styleName:"content-header"},(0,y.__)("Account Management")),r.createElement("h2",{styleName:"content-header"},(0,y.__)("Request Account Data")),e?o.renderDataAccessEligible():o.renderDataAccessVerifyEmail())},o.renderDeleteDataAccount=function(){var e=o.state.accountDeleteState;return r.createElement("div",null,o.renderDeleteModal(),r.createElement("h2",{styleName:"content-header"},(0,y.__)("Delete Your Account")),e===T?o.renderAccountDeletionConfirmation():e===P?o.renderAccountDeletionStep():o.renderRequestAccountDeletionCodeStep())},w(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"render",value:function(){return r.createElement("section",{styleName:"content-container"},this.renderRequestAccessData(),this.renderDeleteDataAccount())}}]),t}(r.Component),i.displayName="settings/setting-personal-info/personal-data",i.propTypes={userId:h.default.string.isRequired,emailAddress:h.default.string.isRequired,rightToAccessValues:h.default.oneOf(a.map(S)),accountDeleteState:h.default.string},o=l))||o;t.default=(0,g.connect)(null,{createNotificationAlert:d.default.createNotificationAlert,createWarningAlert:d.default.createWarningAlert,updateUserSettings:d.default.updateUserSettings})(k)}).call(this,n(10),n(1),n(4))},2238:function(e,t,n){e.exports={"content-container":"personal-data--content-container--3DBgf","content-header":"personal-data--content-header--eQZrq","email-verified-text":"personal-data--email-verified-text--37HSx","email-verified":"personal-data--email-verified--oqvVu","cta-button":"personal-data--cta-button--216-e","flex-row--justify-start-align-center":"personal-data--flex-row--justify-start-align-center--3dj5O","flex-col--justify-start-align-start":"personal-data--flex-col--justify-start-align-start--13pk3","delete-request-verification":"personal-data--delete-request-verification--3Sh2n","delete-code-input":"personal-data--delete-code-input--tScTh","request-data":"personal-data--request-data--pE9UE",notification:"personal-data--notification--3etGh","delete-modal":"personal-data--delete-modal--3mEyX","warning-confirm":"personal-data--warning-confirm--3fHIC","warning-text":"personal-data--warning-text--yd3OH",actions:"personal-data--actions--2gc1_","delete-warnings-list":"personal-data--delete-warnings-list--3T5au"}},2242:function(e,t,n){e.exports={"error-alert":"setting-personal-info--error-alert--3OBCr","content-container":"setting-personal-info--content-container--2rXvo form--flex-column--g8OLQ",main:"setting-personal-info--main--3cA9D form--main--31YLe","content-header":"setting-personal-info--content-header--330IJ form--header-text--ZDMyT","id-container":"setting-personal-info--id-container--2_YeU","avatar-overlay":"setting-personal-info--avatar-overlay--1jzR7","id-left":"setting-personal-info--id-left--1Mw8Y","id-right":"setting-personal-info--id-right--3-gcT",field:"setting-personal-info--field--1SB0y form--input-field--1iAH4","error-field":"setting-personal-info--error-field--1aWrZ setting-personal-info--field--1SB0y form--input-field--1iAH4 form--error-field--10p67","email-container":"setting-personal-info--email-container--Ua3D6"}},2243:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(t){return e.createElement(o.default,t)};var r,a=n(2244),o=(r=a)&&r.__esModule?r:{default:r}}).call(this,n(1))},2244:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(2245),o=(r=a)&&r.__esModule?r:{default:r};t.default=o.default},2245:function(e,t,n){"use strict";(function(e,r,a,o){Object.defineProperty(t,"__esModule",{value:!0}),t.mapStateToProps=t.Subscriptions=void 0;var i,l,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),d=O(n(16)),f=O(n(2246)),p=O(n(65)),m=n(347),h=O(n(1987)),_=O(n(75)),y=O(n(603)),g=O(n(0)),v=O(n(54)),b=O(n(2291)),E=O(n(345)),C=n(12),w=n(31),S=O(n(2310));function O(e){return e&&e.__esModule?e:{default:e}}function N(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var R=t.Subscriptions=r(S.default)((s=l=function(e){function t(){var e,n,r,i,l,s,c=this;P(this,t);for(var d=arguments.length,f=Array(d),p=0;p<d;p++)f[p]=arguments[p];return n=r=T(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(f))),r.state={hideCards:!0},r.handleShowMoreClick=function(e){e.preventDefault();var t=r.state.hideCards;r.setState({hideCards:!t})},r.handleAutoRenewChange=(s=N(regeneratorRuntime.mark((function e(t,n){var a,o,i,l,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.props,o=a.createErrorAlert,i=a.createSuccessAlert,l=a.fetchOrderHistory,s=a.updateAutoRenew,e.prev=1,e.next=4,s(t,n);case 4:return u=void 0,u=n?(0,C.__)("Saved! Your subscription will auto-renew and your payment method will automatically be charged monthly."):(0,C.__)("Saved! Your subscription will not auto-renew. You will receive a monthly bill."),e.next=8,i(u);case 8:return e.next=10,l();case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,o(e.t0.message);case 16:case"end":return e.stop()}}),e,c,[[1,12]])}))),function(e,t){return s.apply(this,arguments)}),r.handleBillingChange=N(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.fetchOrderHistory();case 2:case"end":return e.stop()}}),e,c)}))),r.handleOrderCancel=(l=N(regeneratorRuntime.mark((function e(t,n,a,o,i,l){var s,u,d,f,p,h,_,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.props,u=s.cancelOrder,d=s.cancelTermPurchase,f=s.createErrorAlert,p=s.createNotificationAlert,h=s.user,_=s.updateNotificationPreferences,e.prev=1,y=void 0,n!==m.FLEX_SUBSCRIPTION){e.next=15;break}return e.next=6,u(t,a,o,i,l);case 6:if(!o){e.next=12;break}return e.next=9,_(h.id,[{category:"cancellation",channel:"phone",value:!1},{category:"cancellation",channel:"email",value:!0}]);case 9:y=(0,C.__)("We received your cancellation request."),e.next=13;break;case 12:y=(0,C.__)("Your cancellation request has been processed.");case 13:e.next=18;break;case 15:return e.next=17,d({urn:t},a);case 17:y=(0,C.__)("Your purchase is pending cancellation.");case 18:return a&&!o&&(y+=" ",y+=(0,C.__)("A refund is being processed to your account.")),e.next=21,p(y);case 21:e.next=27;break;case 23:return e.prev=23,e.t0=e.catch(1),e.next=27,f(e.t0.message);case 27:case"end":return e.stop()}}),e,c,[[1,23]])}))),function(e,t,n,r,a,o){return l.apply(this,arguments)}),r.handleOrderUncancel=(i=N(regeneratorRuntime.mark((function e(t){var n,a,o,i,l,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props,a=n.createErrorAlert,o=n.createNotificationAlert,i=n.fetchOrderHistory,l=n.uncancelOrder,e.prev=1,e.next=4,l(t);case 4:return s=(0,C.__)("You closed your cancellation request. Your subscription is now active."),e.next=7,o(s);case 7:i(),e.next=15;break;case 10:return e.prev=10,e.t0=e.catch(1),u=(0,C.__)("You cannot re-enroll in the subscription. Please contact support@udacity.com if you need help."),e.next=15,a(u);case 15:case"end":return e.stop()}}),e,c,[[1,10]])}))),function(e){return i.apply(this,arguments)}),r.handleDiscountApplied=N(regeneratorRuntime.mark((function e(){var t,n,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props,n=t.createErrorAlert,a=t.createNotificationAlert,e.prev=1,o=(0,C.__)("Your discount has been applied!"),e.next=5,a(o);case 5:return e.next=7,r.props.fetchOrderHistory();case 7:e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.next=13,n(e.t0.message);case 13:case"end":return e.stop()}}),e,c,[[1,9]])}))),r.getSubscriptions=function(){var e=r.props.orderHistory;return o.sortBy(e,(function(e){var t=e.next_payment;return t?new Date(t.due_at):new Date(o.get(e,"payment_history[0].charge.charged_at",e.created_at))})).reverse()},r.renderMoreItems=function(e){var t=r.state.hideCards;return[a.createElement("div",{styleName:"showing",key:"line"},a.createElement("div",{styleName:"line"}),a.createElement(u.Text,{size:"xs",spacing:"none"},(0,C.__)("Showing <%= visible %> of <%= total %> Subscriptions",{visible:t?2:e,total:e})),a.createElement("div",{styleName:"line"})),a.createElement("a",{href:"#",onClick:r.handleShowMoreClick,styleName:"center",key:"link"},a.createElement("h2",{color:"cerulean",align:"center",styleName:"see-more"},t?(0,C.__)("See More"):(0,C.__)("See Less")))]},r.renderSubscriptions=function(e){var t=r.props,n=t.billingInfo.auto_renew_eligible,i=t.isReadyToGraduateNdKeys;return a.createElement("ul",null,o.map(e,(function(e){var t=o.includes(i,o.get(e,"purchased_products[0].nanodegree_key")),l=o.get(e,"payment_method.supports_auto_renew",!1);return a.createElement(b.default,{subscription:e,key:e.urn,autoRenewConfigurable:l,autoRenewEligible:n,onAutoRenewChange:r.handleAutoRenewChange,onOrderCancel:r.handleOrderCancel,onOrderUncancel:r.handleOrderUncancel,onDiscountApplied:r.handleDiscountApplied,canGraduate:t,handleOrderHistoryUpdate:r.props.fetchOrderHistory})})))},T(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.fetchSubscribedNanodegrees()}},{key:"renderNoSubscriptions",value:function(){return a.createElement("div",{styleName:"no-subscriptions"},a.createElement("img",{src:h.default,alt:(0,C.__)("Illustration of a sleeping book")}),a.createElement("div",null,a.createElement(u.Heading,{size:"h3",spacing:"2x"},(0,C.__)("You have yet to enroll in a Nanodegree program.")),a.createElement(u.Button,{external:!0,href:"https://www.udacity.com/nanodegree",label:(0,C.__)("See our programs"),variant:"primary"})))}},{key:"render",value:function(){var e=this.props,t=e.billingInfo,n=e.orderHistory,r=this.state.hideCards,i=this.getSubscriptions(),l=o.size(this.getSubscriptions()),s=l>2,c=r?i.slice(0,2):i,d=o.get(t,"billing_methods[0]");return a.createElement("section",{styleName:"content-container"},a.createElement(u.Loading,{busy:!1,label:(0,C.__)("Loading")},a.createElement("h1",{styleName:"title"},(0,C.__)("Subscriptions & Billing")),l>0?this.renderSubscriptions(c):this.renderNoSubscriptions(),s&&this.renderMoreItems(l),a.createElement("div",{styleName:"billing-card"},a.createElement(f.default,{billingMethod:d,onBillingChange:this.handleBillingChange,subscriptions:n})),a.createElement("div",{styleName:"footer"},a.createElement(u.Heading,{size:"h6",spacing:"half"},(0,C.__)("Need Help?")),a.createElement(u.Text,{size:"sm"},(0,C.__)('Check out <a href="https://udacity.zendesk.com/hc/en-us" target="_blank">Help and FAQs</a>',{renderHTML:!0})))))}}]),t}(a.Component),l.displayName="settings/subscriptions/_subscriptions",l.propTypes={billingInfo:p.default.billingInfo,cancelOrder:g.default.func.isRequired,cancelTermPurchase:g.default.func.isRequired,createErrorAlert:g.default.func.isRequired,createNotificationAlert:g.default.func.isRequired,fetchOrderHistory:g.default.func.isRequired,isReadyToGraduateNdKeys:g.default.arrayOf(g.default.string),orderHistory:g.default.arrayOf(p.default.historicOrder),user:p.default.user},i=s))||i,k=t.mapStateToProps=function(e){return{billingInfo:y.default.State.getBillingInfo(e),orderHistory:y.default.State.getOrderHistory(e),isReadyToGraduateNdKeys:o.chain(E.default.State.getSubscribedNanodegrees(e)).filter(_.default.isReadyToGraduate).map("key").value(),user:v.default.State.getUser(e)}};t.default=(0,w.connect)(k,{createSuccessAlert:d.default.createSuccessAlert,createNotificationAlert:d.default.createNotificationAlert,createErrorAlert:d.default.createErrorAlert,cancelOrder:d.default.cancelOrder,cancelTermPurchase:d.default.cancelTermPurchase,fetchOrderHistory:d.default.fetchOrderHistory,fetchSubscribedNanodegrees:d.default.fetchSubscribedNanodegrees,uncancelOrder:d.default.uncancelOrder,updateAutoRenew:d.default.updateAutoRenew,updateNotificationPreferences:d.default.updateNotificationPreferences})(R)}).call(this,n(11),n(10),n(1),n(4))},2246:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.BillingCard=void 0;var o,i,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(28),u=n(2247),d=n(12),f=S(n(16)),p=S(n(2254)),m=S(n(65)),h=S(n(2256)),_=n(1892),y=S(n(2285)),g=S(n(0)),v=S(n(2287)),b=S(n(2289)),E=S(n(607)),C=n(31),w=S(n(2290));function S(e){return e&&e.__esModule?e:{default:e}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var P=t.BillingCard=e(w.default)((l=i=function(e){function t(){var e,n,o;O(this,t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return n=o=N(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),o.state={editingComponent:null,loading:!0,errorMessage:{show:!1,text:""}},o.handleAddClick=function(){o.setState({editingComponent:h.default})},o.handleCancelClick=function(){o.setState({editingComponent:null})},o.handleEditClick=function(e){e.preventDefault(),o.setState({editingComponent:h.default})},o.handleSaveSuccess=function(e){o.props.onBillingChange(),o.setState({editingComponent:null,address:e})},o.handleRemoveClick=function(e){var t=o.props.billingMethod;e.preventDefault(),o._isSepaPayment(t)?o._showCannotDeleteSepaError():o.props.onDeletePaymentMethod(t.urn).then((function(){o.props.onBillingChange().then((function(){o.setState({editingComponent:null})}))}))},o._isSepaPayment=function(e){return!!e&&"sepa_debit"===e.type},o._renderMultiplePaymentForm=function(e,t){return r.createElement("fieldset",{styleName:"billing-fieldset"},r.createElement(u.Tabs,{styleName:"payment-method-tabs",selectedIndex:e?1:0},r.createElement(u.TabList,null,r.createElement(u.Tab,null,"Credit Card"),r.createElement(u.Tab,null,"SEPA Direct-Debit")),r.createElement(u.TabPanel,null,o._renderEditingComponent(t)),r.createElement(u.TabPanel,null,r.createElement(v.default,{onCancelClick:o.handleCancelClick,onSaveSuccess:o.handleSaveSuccess}))))},o._showCannotDeleteSepaError=function(){o.setState({errorMessage:{show:!0,text:(0,d.__)('To delete this payment option, please send an empty email with the subject line\n                           "Delete SEPA payment details" to de-support@udacity.com')}})},o._renderEditingComponent=function(e){var t=o.state.editingComponent,n={billingMethod:o.props.billingMethod,onCancelClick:o.handleCancelClick,onSaveSuccess:o.handleSaveSuccess,urn:e,onHandleRemoveClick:o.handleRemoveClick,showCannotDeleteSepaError:o._showCannotDeleteSepaError};return r.createElement(t,n)},o._shouldShowRemoveButton=function(e){if(!e)return!1;var t=o.props.subscriptions,n=[E.default.status.ACTIVE,E.default.status.CANCELING,E.default.status.TRIALING];return!a.some(t,(function(e){var t=E.default.subscriptionStatus(e);return n.includes(t)}))},o._renderHeaders=function(e){var t=o._shouldShowRemoveButton(e);return r.createElement("div",{styleName:"header"},r.createElement(c.Heading,{size:"h6",as:"h2",spacing:"none"},(0,d.__)("Payment Method")),r.createElement("div",null,t&&r.createElement("a",{href:"#",onClick:o.handleRemoveClick,styleName:"edit"},r.createElement(c.Heading,{size:"h6",as:"h3"},(0,d.__)("remove"))),e&&r.createElement("a",{href:"#",onClick:o.handleEditClick,styleName:"edit"},r.createElement(c.Heading,{size:"h6",as:"h3"},(0,d.__)("edit")))))},N(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidMount",value:function(){var e=this;"CN"===d.i18n.getCountryCode()?this.setState({loading:!1}):b.default.load().then((function(){return e.setState({loading:!1})}))}},{key:"render",value:function(){var e=this.props.billingMethod,t=this.state.editingComponent,n=void 0;if("CN"===d.i18n.getCountryCode())return r.createElement("div",null,r.createElement("section",{styleName:"content-container"}));if(this.state.loading)return r.createElement("section",{styleName:"content-container"},r.createElement(c.Loading,{label:(0,d.__)("Loading")}));if(a.isNil(e))n=r.createElement(p.default,{onAddClick:this.handleAddClick});else{var o=this._isSepaPayment(e);n=r.createElement("div",null,o?r.createElement(y.default,{source:e}):r.createElement(_.PaymentCard,{billingMethod:e}),this.state.errorMessage.show?r.createElement("span",{styleName:"error-container"},this.state.errorMessage.text):null)}return r.createElement("div",{styleName:"item"},null===t?r.createElement("div",null,this._renderHeaders(e),n):this._renderEditingComponent(a.get(e,"urn")))}}]),t}(r.Component),i.displayName="settings/subscriptions/_billing-card",i.propTypes={billingMethod:m.default.billingMethod,onBillingChange:g.default.func.isRequired,onDeletePaymentMethod:g.default.func,subscriptions:g.default.array},i.defaultProps={onDeletePaymentMethod:function(){},subscriptions:[]},o=l))||o;t.default=(0,C.connect)(null,{onDeletePaymentMethod:f.default.deletePaymentMethod})(P)}).call(this,n(10),n(1),n(4))},2254:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0});var o,i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(28),c=p(n(1978)),u=p(n(0)),d=n(12),f=p(n(2255));function p(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=e((i=o=function(e){function t(){return m(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),l(t,[{key:"render",value:function(){return r.createElement("div",{styleName:"add-payment-method"},r.createElement("img",{src:c.default,alt:(0,d.__)("Illustration of a ghost")}),r.createElement("div",null,r.createElement(s.Text,null,(0,d.__)("Add a credit or debit card to make future purchases faster. This may unlock the auto-renew option so you never miss a payment.")),r.createElement(s.Button,{onClick:this.props.onAddClick,label:(0,d.__)("Add Payment Method"),small:!0,variant:"secondary"})))}}]),t}(r.Component),o.displayName="settings/setting-billing/_add-payment",o.propTypes={onAddClick:u.default.func},o.defaultProps={onAddClick:a.noop},i),f.default)}).call(this,n(10),n(1),n(4))},2255:function(e,t,n){e.exports={"add-payment-method":"_add-payment--add-payment-method--3SAzD"}},2256:function(e,t,n){"use strict";(function(e,r,a,o){Object.defineProperty(t,"__esModule",{value:!0}),t.CreditCardWrapper=void 0;var i,l,s,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),d=n(1892),f=b(n(16)),p=b(n(1986)),m=n(28),h=b(n(0)),_=b(n(1821)),y=n(12),g=n(31),v=b(n(2284));function b(e){return e&&e.__esModule?e:{default:e}}function E(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S={onUpdateDefaultPaymentMethod:f.default.updateDefaultPaymentMethod,createErrorAlert:f.default.createErrorAlert},O={city:"",country:"",line1:"",line2:"",phoneNumber:"",postalCode:"",region:"",state:""},N={cardNumber:"",expiry:"",cvc:"",type:""},P=t.CreditCardWrapper=r(v.default)((s=l=function(e){function t(){var e,n,r,a=this;C(this,t);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return n=r=w(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),r.state={validateAllFields:!1,card:{},valid:!1},r.getAddressFromBilling=function(){var e=r.props.billingMethod,t=null;if(!o.isNil(e)&&o.has(e,"credit_card.address")){var n=e.credit_card.address;t={city:n.city,country:n.country,line1:n.line1,line2:n.line2,phoneNumber:n.phone,postalCode:n.postal_code,region:n.region}}return t},r.handleSaveClick=E(regeneratorRuntime.mark((function e(){var t,n,i,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=r.props.onUpdateDefaultPaymentMethod,n=r.state,i=n.card,n.valid){e.next=6;break}return r.setState({validateAllFields:!0}),e.abrupt("return");case 6:return e.next=8,d.TokenService.createCardToken("stripe",i);case 8:return l=e.sent,s=o.pick(i,["line1","line2","city","region","country","postalCode"]),e.next=12,t(l.card_token,s);case 12:r.props.onSaveSuccess(s),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),r.props.createErrorAlert((0,y.__)("Unable to add Card. Please verify the information you have entered."));case 18:case"end":return e.stop()}}),e,a,[[0,15]])}))),r.handleCheckboxChange=function(e){var t=e.target.checked,n=r.getAddressFromBilling(),a=t?n:O;r.setState({card:c({},a,N)})},r.isCheckboxChecked=function(){var e=r.state.card,t=r.getAddressFromBilling(),n=o.pick(e,o.keys(O));return o.isEqual(t,n)},r.handleOnChange=function(e){var t=e.card,n=e.valid;r.setState({card:t,valid:n})},w(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),u(t,[{key:"render",value:function(){var e=this.props.onCancelClick,t=this.state,n=t.card,r=t.validateAllFields,o=this.getAddressFromBilling();return a.createElement("form",null,a.createElement("div",{styleName:"content-container"},a.createElement(p.default,null),a.createElement("div",{styleName:"checkbox"},o&&a.createElement(m.Checkbox,{label:(0,y.__)("Use Current Billing Address"),checked:this.isCheckboxChecked(),id:"current-address",onChange:this.handleCheckboxChange})),a.createElement(d.CreditCardForm,{onChange:this.handleOnChange,validateAllFields:r,cardForm:{card:n}})),a.createElement("div",{styleName:"buttons-container"},a.createElement(_.default,{onSaveClick:this.handleSaveClick,onCancelClick:e})))}}]),t}(a.Component),l.displayName="settings/setting-billing/_credit-card-wrapper",l.propTypes={billingMethod:h.default.object,onCancelClick:h.default.func,onSaveSuccess:h.default.func.isRequired},l.defaultProps={onCancelClick:o.noop},i=s))||i;t.default=(0,g.connect)(null,S)(P)}).call(this,n(11),n(10),n(1),n(4))},2283:function(e,t,n){e.exports={"header-text":"_billing-header--header-text--1opB4 form--header-text--ZDMyT","info-text":"_billing-header--info-text--2kqzp"}},2284:function(e,t,n){e.exports={"content-container":"_credit-card-wrapper--content-container--3bgjM form--flex-column--g8OLQ form--main--31YLe","buttons-container":"_credit-card-wrapper--buttons-container--JyEyl",buttons:"_credit-card-wrapper--buttons--2z4zI",checkbox:"_credit-card-wrapper--checkbox--3R23W"}},2285:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=u(n(0)),s=n(12),c=u(n(2286));function u(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=e((o=a=function(e){function t(){return d(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),i(t,[{key:"render",value:function(){var e=this.props.source,t=e.source_details.last4.toString().slice(0,2),n=e.source_details.last4.toString().slice(2);return r.createElement("div",null,r.createElement("div",{styleName:"cc-container"},r.createElement("div",{styleName:"cc-info"},r.createElement("div",null,e.owner.name),r.createElement("div",null,e.source_details.country,"   ",t," ",n),r.createElement("a",{href:e.source_details.mandate_url,target:"_blank",styleName:"link"},(0,s.__)("View SEPA Mandate"))),r.createElement("div",{styleName:"cc-icon"},r.createElement("div",{styleName:"bank-icon"}))))}}]),t}(r.Component),a.displayName="settings/setting-billing/_payment-sepa",a.propTypes={source:l.default.shape({id:l.default.string,currency:l.default.string,object:l.default.string,type:l.default.string,owner:l.default.shape({address:l.default.object,email:l.default.string}),source_details:l.default.shape({last4:l.default.number,country:l.default.string,fingerprint:l.default.string,mandate_reference:l.default.string,mandate_url:l.default.string})}),id:l.default.string},a.defaultProps={source:{}},o),c.default)}).call(this,n(10),n(1))},2286:function(e,t,n){e.exports={"cc-container":"_payment-sepa--cc-container--2Fqdh","cc-info":"_payment-sepa--cc-info--cOqTX form--flex-column--g8OLQ form--header-text--ZDMyT","cc-icon":"_payment-sepa--cc-icon--2QEs1","right-align":"_payment-sepa--right-align--NrBl9",icon:"_payment-sepa--icon--2Web3","bank-icon":"_payment-sepa--bank-icon--2DwsR _payment-sepa--icon--2Web3",link:"_payment-sepa--link--NvfDv"}},2287:function(e,t,n){"use strict";(function(e,r,a,o){Object.defineProperty(t,"__esModule",{value:!0}),t.SepaFormWrapper=void 0;var i,l,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1892),d=g(n(16)),f=g(n(1986)),p=g(n(0)),m=g(n(1821)),h=n(12),_=n(31),y=g(n(2288));function g(e){return e&&e.__esModule?e:{default:e}}function v(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C={onUpdateDefaultSource:d.default.updateDefaultSource,createErrorAlert:d.default.createErrorAlert},w=t.SepaFormWrapper=r(y.default)((s=l=function(e){function t(){var e,n,r,a=this;b(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=r=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={validateAllFields:!1,bankAccount:{},valid:!1},r.handleSaveClick=v(regeneratorRuntime.mark((function e(){var t,n,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=r.props.onUpdateDefaultSource,n=r.state,o=n.bankAccount,n.valid){e.next=6;break}return r.setState({validateAllFields:!0}),e.abrupt("return");case 6:return e.next=8,u.TokenService.createSepaToken(o);case 8:return i=e.sent,e.next=11,t(i);case 11:r.props.onSaveSuccess(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),r.props.createErrorAlert((0,h.__)("An error occurred while trying to update your SEPA direct-debit"));case 17:case"end":return e.stop()}}),e,a,[[0,14]])}))),r.handleOnChange=function(e){var t=e.bankAccount,n=e.valid;r.setState({bankAccount:t,valid:n})},E(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"render",value:function(){var e=this.state.validateAllFields;return a.createElement("div",null,a.createElement("div",{className:"sepa-form"},a.createElement("div",{styleName:"content-container"},a.createElement(f.default,null),a.createElement("div",{styleName:"inputs-container"},a.createElement(u.SepaForm,{onChange:this.handleOnChange,validateAllFields:e})))),a.createElement(m.default,{onSaveClick:this.handleSaveClick,onCancelClick:this.props.onCancelClick}))}}]),t}(a.Component),l.displayName="settings/setting-billing/_sepa-form-wrapper",l.propTypes={onCancelClick:p.default.func,onSaveSuccess:p.default.func.isRequired},l.defaultProps={onCancelClick:o.noop},i=s))||i;t.default=(0,_.connect)(null,C)(w)}).call(this,n(11),n(10),n(1),n(4))},2288:function(e,t,n){e.exports={"content-container":"_sepa-form-wrapper--content-container--3uRAR form--main--31YLe","inputs-container":"_sepa-form-wrapper--inputs-container--2B6L8 form--flex-column--g8OLQ"}},2289:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(356),o=(r=a)&&r.__esModule?r:{default:r};t.default={load:function(){return o.default.promisedLoad("https://js.stripe.com/v2/","stripe-base").then((function(){window.Stripe.setPublishableKey(CONFIG.stripePublishableKey)}))},createStripeToken:function(t){return new e((function(e,n){window.Stripe.card.createToken(t,(function(t,r){t.error?n(t.error):e(r.id)}))}))}}}).call(this,n(11))},2290:function(e,t,n){e.exports={item:"_billing-card--item--JtPox _subscription-card--item--agyqV","content-container":"_billing-card--content-container--2UcTh","edit-container":"_billing-card--edit-container--_K1Q4 _billing-card--content-container--2UcTh",header:"_billing-card--header--3ZHdt undefined",edit:"_billing-card--edit--13Y2w",data:"_billing-card--data--uJJ_O",address:"_billing-card--address--TmucK","cc-info":"_billing-card--cc-info--3vv0g","cc-icon":"_billing-card--cc-icon--3DAN0",buttons:"_billing-card--buttons--1drbd"}},2291:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.SubscriptionCard=void 0;var o,i,l,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),d=n(347),f=n(1895),p=j(n(16)),m=j(n(103)),h=j(n(43)),_=j(n(2292)),y=j(n(2293)),g=j(n(2298)),v=j(n(2308)),b=j(n(65)),E=j(n(165)),C=j(n(608)),w=j(n(344)),S=j(n(1824)),O=j(n(1978)),N=j(n(1987)),P=n(50),T=j(n(1992)),R=j(n(603)),k=j(n(1989)),A=j(n(0)),x=j(n(607)),D=j(n(345)),I=j(n(4)),M=n(12),L=n(31),U=j(n(2309));function j(e){return e&&e.__esModule?e:{default:e}}function F(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}var q=t.SubscriptionCard=r(U.default,{allowMultiple:!0})((l=i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));s.call(n),n.setWindowWidth=n.setWindowWidth.bind(n),n.debouncedSetWindowWidth=I.default.debounce(n.setWindowWidth,300);var r=(0,f.setAllFeaturesTo)(null),a=(0,f.bestSupportOption)(M.i18n.getCountryCode(),r);return n.state={historyOpen:!1,isAutoPayModalOpen:!1,isCancelModalOpen:!1,modalType:a,toolTipOpen:!1,width:0,catalogDegree:{},cancelFlowFeatures:r},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.fetchFeatureEnabledOptimizely,r=t.fetchPredictions,a=t.subscription,o=t.subscription,i=o.cancel_url,l=o.status,s=x.default.getNanodegreeKey(a);I.default.isString(i)&&I.default.includes(d.CANCELABLE_STATUSES,l)&&n(w.default.CANCEL_FLOW_INTERCOM+"-"+s,h.default.getCurrentUserId(),w.default.CANCEL_FLOW_INTERCOM,{is_china_managed_nd:x.default.isChinaManaged(a),is_enterprise:x.default.isEnterprise(a),is_preorder:x.default.isPreorder(a),is_open_ended:I.default.isEqual(I.default.get(a,"type"),d.FLEX_SUBSCRIPTION)}),(0,f.checkCancelFlowFeatures)(r,C.default.getFeatures,{userId:h.default.getCurrentUserId(),subscription:a}).then((function(t){e.setState({cancelFlowFeatures:t})})),this.setCatalogDegree(),this.setWindowWidth(),window.addEventListener("resize",this.debouncedSetWindowWidth)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.debouncedSetWindowWidth)}},{key:"setWindowWidth",value:function(){this.setState({width:window.innerWidth})}},{key:"renderAutoRenew",value:function(){var e=this.props,t=e.subscription,n=t.urn,r=t.next_payment.can_auto_renew,o=t.payment_method,i=e.autoRenewConfigurable,l=e.autoRenewEligible;if(!i)return null;if(i&&r)return a.createElement("p",{styleName:"payment-message"},(0,M.__)("Your subscription has auto-renew enabled. Your payment will be processed on the due date."));var s=I.default.get(o,"processor",""),c=this.state.isAutoPayModalOpen;return l?a.createElement("div",null,a.createElement("div",{styleName:"flex-center"},a.createElement(u.Checkbox,{label:(0,M.__)("Enable Auto-renew"),id:"autopay-"+n,checked:r,onChange:this.handleEnableAutoPayClick,testID:"autopay-checkbox"}),a.createElement(_.default,{onConfirmAutoPay:this.handleConfirmAutoPayClick,onCloseModal:this.handleCloseAutoPayModalClick,isOpen:c}),!i&&"stripe"===s&&a.createElement(u.Tooltip,{trigger:a.createElement(P.IconWarning,{color:"orange",size:"md",title:"add payment method"}),direction:this.state.width>550?"bottom":"start",content:(0,M.__)("Please add a payment method below to enable auto-renew for this subscription.")})),a.createElement("p",{styleName:"payment-message"},(0,M.__)("Keep your subscription active and enable auto-renew or pay before the due date."))):a.createElement("p",{styleName:"payment-message"},(0,M.__)("Keep your subscription active and pay before the due date"))}},{key:"renderBanner",value:function(e,t){var n=E.default.getGracePeriod(e),r={overdue:{copy:(0,M.__)("Payment is past due! Pay before <%= date %> to avoid losing access.",{date:n}),variant:"warning"},failed:{copy:(0,M.__)("Failed payment. Pay before <%= date %> to avoid losing access.",{date:n}),variant:"error"},preorder:{copy:(0,M.__)("The classroom is now open! Pay before <%= date %> to start learning.",{date:n}),variant:"warning"}};return a.createElement("div",{styleName:"banner"},a.createElement(u.Banner,{embedded:!0,icon:a.createElement(P.IconWarning,null),variant:r[t].variant},r[t].copy))}},{key:"renderNextPayment",value:function(){var e=this.props.subscription,t=e.next_payment,n=e.payment_history,r=I.default.get(n,"[0]",{});return a.createElement("div",{styleName:"payment"},R.default.paymentFailed(r)&&this.renderBanner(I.default.get(r,"charge.charged_at",""),"failed"),R.default.isPaymentOverdue(t)?R.default.isPreOrder(e)?this.renderBanner(I.default.get(t,"due_at",""),"preorder"):this.renderBanner(I.default.get(t,"due_at",""),"overdue"):null,a.createElement("div",{styleName:"grid"},a.createElement("div",{styleName:"payment-info"},a.createElement("p",{styleName:"payment-due"},(0,M.__)("due date")),a.createElement("p",{styleName:"payment-due-date"},E.default.formatShortMonth(I.default.get(t,"due_at")))),a.createElement("div",{styleName:"payment-auto-renew"},this.renderAutoRenew()),a.createElement("div",{styleName:"payment-pay-now"},a.createElement("p",{styleName:"pay-amount"},R.default.getDisplayPrice(t)),this.renderPayBtn())))}},{key:"renderNoNextPayment",value:function(){var e=this,t=this.props,n=t.onOrderUncancel,r=t.subscription,o=r.status,i=r.type,l=r.urn,s=r.payment_history,c=r.can_uncancel,f=r.no_uncancel_reason,p=r.period_end_date,m=I.default.get(s,"[0]",{}),h=this.state.catalogDegree;if(i===d.FLEX_SUBSCRIPTION){if(o===d.CANCELING){if(!1===c){var _=void 0;switch(f){case d.CA_OVER_LIMIT:_=(0,M.__)('Your billing address indicates that you are a resident of California. You have reached the mandatory price cap set by California education regulations for this subscription. You have been granted additional time free of charge in order to complete the program. Full access will end on <%= period_end_date %>. Learn more about California regulations <a href="https://www.udacity.com/legal/en-us/california-residents">here</a>',{period_end_date:E.default.formatShortMonth(p)},{renderHTML:!0});break;default:_=(0,M.__)("You cannot resume this subscription.")}return a.createElement("div",{styleName:"no-payment-canceling"},c&&a.createElement("img",{src:N.default,alt:(0,M.__)("Illustration of a sleeping book")}),a.createElement(u.Text,null,_))}return a.createElement("div",{styleName:"no-payment-canceling"},a.createElement("div",null,a.createElement("img",{src:N.default,alt:(0,M.__)("Illustration of a sleeping book")})),a.createElement("div",null,a.createElement(u.Text,null,(0,M.__)("Change your mind? It's not too late.")),a.createElement(u.Button,{onClick:function(){e.setState({isCancelModalOpen:!1}),n(l)},label:(0,M.__)("Keep my enrollment"),small:!0,variant:"primary"})))}if(I.default.isEmpty(h))return null;var y="https://www.udacity.com/course/"+I.default.get(h,"slug");return a.createElement("div",{styleName:"no-payment-canceled"},a.createElement("div",null,a.createElement("img",{src:O.default,alt:(0,M.__)("Illustration of a ghost")})),a.createElement("div",null,a.createElement(u.Text,null,(0,M.__)("Jump back in where you left off.")),a.createElement(u.Button,{href:y,external:!0,label:(0,M.__)("Re-Enroll"),small:!0,variant:"primary"})))}return a.createElement("div",{styleName:"no-payment-needed"},R.default.paymentFailed(m)&&this.renderBanner(I.default.get(m,"charge.charged_at",""),"failed"),a.createElement("img",{src:T.default,alt:(0,M.__)("Illustration of a map with a flag")}),a.createElement("div",null,!R.default.paymentFailed(m)&&a.createElement(u.Text,null,(0,M.__)("No upcoming payment. Keep on learning!"))))}},{key:"renderEnrolledDate",value:function(){var e=this.props.subscription,t=e.created_at,n=e.canceled_at,r=e.period_end_date,o=e.status,i=e.updated_at,l=function(e,t){return a.createElement("p",{styleName:"info-line"},a.createElement("span",{styleName:"bold"},e,": "),E.default.formatDate(t))};if(I.default.isEqual(o,d.PREORDER)){var s=I.default.get(this.props,"subscription.next_payment.due_at");return l((0,M.__)("Opens on"),s)}return I.default.includes(d.CANCELABLE_STATUSES,o)?l((0,M.__)("Enrolled on"),t):o===d.CANCELING?l((0,M.__)("Enrollments end on"),r):l((0,M.__)("Unenrolled on"),n||i)}},{key:"renderPaymentMethod",value:function(){var e=this.props.subscription.payment_method;return a.createElement("div",null,a.createElement("p",{styleName:"info-line"},a.createElement("span",{styleName:"bold"},(0,M.__)("Payment method"),": "),e.description))}},{key:"renderStatus",value:function(e){switch(e){case d.CANCELING:return(0,M.__)("cancel pending");default:return(0,M.__)(I.default.lowerCase(e))}}},{key:"render",value:function(){var e=this.props,t=e.subscription,n=t.cancel_url,r=t.next_payment,o=t.payment_method,i=t.purchased_products,l=t.status,s=t.payment_history,c=t.payment_plan,f=t.type,p=e.isFreeTrial,m=this.state.historyOpen,h=o&&I.default.includes(d.SHOW_PAYMENT_METHOD_STATUSES,l),_=!I.default.isEmpty(s),g=I.default.isString(n)&&I.default.includes(d.CANCELABLE_STATUSES,l);return a.createElement("li",{styleName:"item"},p&&a.createElement("div",{styleName:"free-trial-message"},a.createElement(u.Text,{size:"sm",align:"center",spacing:"none"},(0,M.__)("There is a <%= count %> project limit during your free trial",{count:1}))),a.createElement("div",{styleName:"contain"},a.createElement("div",{styleName:"product"},a.createElement("p",{styleName:"status"},this.renderStatus(l)),a.createElement("p",{styleName:"title"},i[0].name),this.renderEnrolledDate(),h&&this.renderPaymentMethod()),r?this.renderNextPayment():this.renderNoNextPayment()),a.createElement("div",null,m&&a.createElement(y.default,{nextPayment:r,payments:s,productInfo:i[0],paymentPlan:c,isFlexSubscription:f===d.FLEX_SUBSCRIPTION}),(_||g)&&a.createElement("div",{styleName:_?"billing":"billing-cancel"},_&&a.createElement("a",{styleName:"billing-link",href:"javascript:void(0)",title:(0,M.__)("billing history"),onClick:this.handleHistoryClick},a.createElement("div",{styleName:"flex-center"},m?a.createElement("span",{styleName:"drawer-icon"},""):a.createElement("span",{styleName:"drawer-icon"},"+"),a.createElement("span",null,(0,M.__)("billing history")))),g&&this.renderCancelBtn())))}}]),t}(a.Component),i.displayName="settings/subscriptions/_subscription-card",i.propTypes={autoRenewConfigurable:A.default.bool.isRequired,autoRenewEligible:A.default.bool.isRequired,createErrorAlert:A.default.func.isRequired,createNotificationAlert:A.default.func.isRequired,canGraduate:A.default.bool.isRequired,handleOrderHistoryUpdate:A.default.func.isRequired,isFreeTrial:A.default.bool,onAutoRenewChange:A.default.func.isRequired,onOrderCancel:A.default.func.isRequired,onOrderUncancel:A.default.func.isRequired,onDiscountApplied:A.default.func.isRequired,subscription:b.default.historicOrder},s=function(){var e,t=this;this.setCatalogDegree=F(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.subscription.purchased_products,e.prev=1,e.next=4,v.default.getNDFromContentful(I.default.get(n,"[0].nanodegree_key")).then((function(e){return e.items[0].fields}));case 4:r=e.sent,t.setState({catalogDegree:r}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,t,[[1,8]])}))),this.handleEnableAutoPayClick=function(){var e=t.props.subscription;m.default.track("Opened Subscription Enable Auto-Renew Modal",{subscription:I.default.omit(e,["event_history","next_payment","payment_method","payment_history"])}),t.setState({isAutoPayModalOpen:!0})},this.handleSelfServeCancel=(e=F(regeneratorRuntime.mark((function e(n,r){var a,o,i,l,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.props,o=a.onOrderCancel,i=a.subscription,l=i.can_refund,s=i.type,c=i.urn,e.next=3,o(c,s,l,!1,n,r);case 3:case"end":return e.stop()}}),e,t)}))),function(t,n){return e.apply(this,arguments)}),this.handleSelfServeDiscountApplied=F(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props.onDiscountApplied,e.next=3,n();case 3:case"end":return e.stop()}}),e,t)}))),this.handleCloseAutoPayModalClick=function(){var e=t.props.subscription;m.default.track("Closed Subscription Enable Auto-Renew Modal",{subscription:I.default.omit(e,["event_history","next_payment","payment_method","payment_history"])}),t.setState({isAutoPayModalOpen:!1})},this.handleConfirmAutoPayClick=F(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.props,r=n.onAutoRenewChange,a=n.subscription.urn,o=n.subscription,!0,e.prev=2,e.next=5,r(a,!0);case 5:m.default.track("Clicked Enable Auto-Renew for Subscription",{subscription:I.default.omit(o,["event_history","next_payment","payment_method","payment_history"])}),t.setState({isAutoPayModalOpen:!1}),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.error(e.t0),t.setState({isAutoPayModalOpen:!1});case 13:case"end":return e.stop()}}),e,t,[[2,9]])}))),this.handleHistoryClick=function(e){e.preventDefault();var n=t.state.historyOpen;t.setState({historyOpen:!n})},this.handleClickCancel=function(){t.setState({isCancelModalOpen:!0,modalType:(0,f.bestSupportOption)(M.i18n.getCountryCode(),t.state.cancelFlowFeatures)})},this.renderCancelBtn=function(){var e=t.props,n=e.canGraduate,r=e.handleOrderHistoryUpdate,o=e.subscription,i=e.subscription,l=i.can_refund,s=i.period_end_date,c=i.status,p=i.type,m=i.urn,h=i.original_price,_=e.grcModel,y=t.state,v=y.cancelFlowFeatures,b=y.isCancelModalOpen,C=y.modalType,w=(0,f.commonCancellationEventProps)(M.i18n.getCountryCode(),x.default.getRegion(o),o,_,v);return[a.createElement(u.Button,{onClick:function(){return t.handleClickCancel()},label:(0,M.__)("Cancel"),small:!0,variant:"minimal",key:"btn"}),a.createElement(g.default,{show:b,nanodegreeTitle:x.default.getNanodegreeTitle(o),onHide:function(){return t.setState({isCancelModalOpen:!1})},onSelfServeCancel:t.handleSelfServeCancel,onSelfServeDiscountApplied:t.handleSelfServeDiscountApplied,handleOrderHistoryUpdate:r,itemType:p,key:"cancel",modalType:C,cancelEventProps:w,refundable:l&&!n,isPreorder:c===d.PREORDER,periodEndDate:E.default.formatDate(s),subscriptionUrn:m,originalPrice:h})]},this.renderPayBtn=function(){var e=t.props.subscription.next_payment.payment_url;if(I.default.isString(e))return a.createElement(u.Button,{external:!0,full:!0,href:e,label:(0,M.__)("Pay Now"),variant:"primary"})}},o=l))||o;t.default=(0,L.connect)((function(e,t){var n=x.default.getNanodegreeKey(t.subscription);return{grcModel:k.default.getGrcModel(D.default.State.getPredictions(e),null),isFreeTrial:S.default.State.isFreeTrial(e,n)}}),{createErrorAlert:p.default.createErrorAlert,createNotificationAlert:p.default.createNotificationAlert,fetchFeatureEnabledOptimizely:p.default.fetchFeatureEnabledOptimizely,fetchPredictions:p.default.fetchPredictions})(q)}).call(this,n(11),n(10),n(1))},2292:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r,a,o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(28),s=n(0),c=(o=s)&&o.__esModule?o:{default:o},u=n(12);function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=(a=r=function(t){function n(){return d(this,n),f(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),i(n,[{key:"render",value:function(){var t=this.props,n=t.isOpen,r=t.onCloseModal,a=t.onConfirmAutoPay;return e.createElement(l.Modal,{open:n,onClose:r,label:(0,u.__)("Cancel Subscription"),closeLabel:(0,u.__)("Close Modal")},e.createElement(l.Heading,{size:"h2",align:"center",color:"slate"},(0,u.__)("Never Miss a Payment. Enable Auto-Renew.")),e.createElement(l.Text,{color:"slate",align:"center"},(0,u.__)("Enable auto-renew to ensure youll never miss a payment, and have a continuous learning experience and access to services. Your subscription payment will be processed automatically until you complete your program requirements or cancel your subscription.")),e.createElement(l.Flex,{center:!0,full:!0},e.createElement(l.Button,{label:"Enable Auto-renew",variant:"primary",onClick:a}),e.createElement(l.Button,{label:"Cancel",variant:"secondary",onClick:r})))}}]),n}(e.PureComponent),r.propTypes={onConfirmAutoPay:c.default.func.isRequired,onCloseModal:c.default.func.isRequired,isOpen:c.default.bool.isRequired},a);t.default=p}).call(this,n(1))},2293:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,l,s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),d=n(2294),f=n(50),p=v(n(65)),m=v(n(165)),h=v(n(2295)),_=v(n(603)),y=v(n(0)),g=n(12);function v(e){return e&&e.__esModule?e:{default:e}}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w=e(v(n(2297)).default)((l=i=function(e){function t(){var e,n,r;E(this,t);for(var o=arguments.length,i=Array(o),l=0;l<o;l++)i[l]=arguments[l];return n=r=C(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i))),r.state={showInvoiceModal:!1},r.filteredPayments=function(){var e=r.props.payments;return a.filter(e,(function(e){var t=e.status;return!a.includes(d.FILTERABLE_PAYMENT_STATUSES,t)}))},r.paymentsWithNext=function(){var e=r.props.nextPayment;return e?[s({},e,{status:_.default.isPaymentOverdue(e)?"past_due":"due",charge:{charged_at:a.get(e,"due_at")}})].concat(b(r.filteredPayments())):r.filteredPayments()},r.openModal=function(e){r.setState({showInvoiceModal:e})},r.closeModal=function(){r.setState({showInvoiceModal:null})},C(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"renderTooltip",value:function(e){var t=m.default.getGracePeriod(e),n=(0,g.__)("If you do not make a payment before the grace period ends on <%= gracePeriod %>, your subscription and enrollment to the program will become inactive",{gracePeriod:t}),a=r.createElement(f.IconWarning,{color:"orange",size:"md"});return r.createElement(u.Tooltip,{content:n,trigger:a,direction:"bottom",inverse:!0})}},{key:"renderStatus",value:function(e){var t=a.get(e,"status"),n=_.default.getDisplayStatus(e);return t===d.PAST_DUE||t===d.FAILED?r.createElement("div",null,r.createElement("span",{styleName:"overdue"},n),this.renderTooltip(a.get(e,"charge.charged_at"))):r.createElement("div",null,n)}},{key:"render",value:function(){var e=this,t=this.props.isFlexSubscription,n=this.state.showInvoiceModal;return r.createElement("div",{styleName:"billing-history"},r.createElement("div",{styleName:t?"grid-5":"grid-4"},r.createElement("div",{styleName:"label"},(0,g.__)("Due Date")),r.createElement("div",{styleName:"label"},(0,g.__)("Status")),r.createElement("div",{styleName:"label"},(0,g.__)("Amount")),t&&r.createElement("div",{styleName:"label"},(0,g.__)("Billing Period")),r.createElement("div",{styleName:"label"},(0,g.__)("Receipt")),a.map(this.paymentsWithNext(),(function(o,i){return r.createElement(r.Fragment,{key:a.get(o,"urn")},r.createElement("div",{styleName:"value"},m.default.formatShortMonth(a.get(o,"charge.charged_at"))),r.createElement("div",{styleName:"value"},e.renderStatus(o)),r.createElement("div",{styleName:"value"},_.default.getDisplayPrice(o)),t&&r.createElement("div",{styleName:"value"},m.default.formatShortMonth(a.get(o,"period_start"))+" - "+m.default.formatShortMonth(a.get(o,"period_end"))),r.createElement("div",{styleName:"value"},r.createElement(u.Button,{label:(0,g.__)("request receipt"),icon:r.createElement(f.IconDownload,{color:"cerulean",size:"sm"}),iconOnly:!0,onClick:function(){return e.openModal(i)},variant:"minimal"}),r.createElement(h.default,{payment:o,productInfo:e.props.productInfo,open:n===i,onClose:e.closeModal,paymentPlan:e.props.paymentPlan})))}))))}}]),t}(r.Component),i.propTypes={nextPayment:p.default.nextPayment,payments:p.default.paymentHistory,productInfo:p.default.purchasedProduct,paymentPlan:p.default.paymentPlan,isFlexSubscription:y.default.bool.isRequired},o=l))||o;t.default=w}).call(this,n(10),n(1),n(4))},2294:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.ACTIVE="active",a=t.PREORDER="pre_order",o=t.CANCELING="canceling",i=(t.CANCELED="canceled",t.PAST_DUE="past_due");t.FAILED="failed",t.FLEX_SUBSCRIPTION="flex_subscription",t.CANCELABLE_STATUSES=[a,r,i],t.FILTERABLE_PAYMENT_STATUSES=["invalidated"],t.SHOW_PAYMENT_METHOD_STATUSES=[a,r,o,i]},2295:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.InvoiceModal=void 0;var a,o,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(28),c=n(347),u=v(n(16)),d=v(n(103)),f=v(n(43)),p=v(n(65)),m=v(n(1897)),h=v(n(2296)),_=v(n(0)),y=n(12),g=n(31);function v(e){return e&&e.__esModule?e:{default:e}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var w={createErrorAlert:u.default.createErrorAlert},S=t.InvoiceModal=(o=a=function(t){function n(){var e,t,a;E(this,n);for(var o=arguments.length,l=Array(o),s=0;s<o;s++)l[s]=arguments[s];return t=a=C(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),a.state={fullName:"",address1:"",address2:"",company:""},a.handleTextChange=function(e){var t=r.get(e,"target.name"),n=r.get(e,"target.value");a.setState(b({},t,n))},a.handleDownloadInvoice=function(){var e=a.props,t=e.createErrorAlert,n=e.payment,o=e.onClose,l=e.productInfo,s=l.cohort_id,c=l.nanodegree_key,u=l.term_id,p=e.paymentPlan,_=a.getInvoiceParams(n,p),y=n.urn,g=n.total_amount.display,v=f.default.getCurrentUserId();return h.default.fetchInvoice(_).then((function(e){var t=new File([e],{type:"application/octet-stream"});m.default.saveAs(t,"Payment receipt "+_.invoice_id+".pdf"),d.default.track("Receipt Downloaded",i({invoiceUrn:y,payment_plan_type:a.getType(p),receipt_price:g,user_id:v,cohort_id:s,nanodegree_key:c,term_id:u},r.omit(_,["template","invoice_id"]))),o()})).catch((function(e){var n=r.get(e,"error.message"),a=h.default.mapInvoiceError(n);console.error(n),t(a),o()}))},a.getInvoiceParams=function(e,t){var n=a.state,o=n.address1,i=n.address2,l=n.company,s=n.fullName,c=r.last(r.split(r.get(e,"urn"),":")),u=e.line_items;return{address_1:o,address_2:i,company:l,invoice_id:c,locale:y.i18n.getLocale(),name:s,template:"nd-term-invoice",line_items:u,type:a.getType(t)}},C(a,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),l(n,[{key:"getType",value:function(e){switch(r.get(e,"type")){case c.RECURRING:return"Month";case c.UPFRONT_RECURRING:return r.get(e,"upfront_interval_count")+" Month Bundle";default:return"Seat"}}},{key:"render",value:function(){var t=this.props,n=t.open,a=t.onClose,o=y.i18n.getLocale(),i=this.state,l=i.fullName,c=i.address1,u=i.address2,d=i.company;return"en-us"===o?e.createElement(s.Modal,{onClose:a,label:"request-receipt",open:n},e.createElement(s.Heading,{spacing:"1x",size:"h3"},(0,y.__)("Download your receipt")),e.createElement(s.Text,null,(0,y.__)("Add your name and address to download your receipt. Add your company information and address if you need an receipt for your employer.")),e.createElement(s.TextInput,{id:"name",label:(0,y.__)("Full Name"),name:"fullName",required:!0,onChange:this.handleTextChange,value:l}),e.createElement(s.TextInput,{id:"company",label:(0,y.__)("Company"),name:"company",onChange:this.handleTextChange,value:d}),e.createElement(s.TextInput,{id:"address1",label:(0,y.__)("Address 1"),name:"address1",onChange:this.handleTextChange,value:c}),e.createElement(s.TextInput,{id:"address2",label:(0,y.__)("Address 2"),name:"address2",onChange:this.handleTextChange,value:u}),e.createElement(s.Button,{disabled:r.isEmpty(l),label:(0,y.__)("download receipt"),onClick:this.handleDownloadInvoice,variant:"primary"})):e.createElement(s.Modal,{onClose:a,label:"request-receipt",open:n},e.createElement(s.Heading,{spacing:"1x",size:"h3",align:"center"},(0,y.__)("Invoice unavaible for your current language setting.")),e.createElement(s.Text,{align:"center",style:"margin:auto;"},(0,y.__)('We are currently working to support receipt downloading in multiple languages. Please <a href="<%= classroomUrl %>">update your language to English</a> to download a receipt.',{classroomUrl:CONFIG.classroomUrl+"/settings/language-preference"},{renderHTML:!0})))}}]),n}(e.Component),a.propTypes={open:_.default.bool.isRequired,onClose:_.default.func.isRequired,payment:p.default.prevPayment.isRequired},o);t.default=(0,g.connect)(null,w)(S)}).call(this,n(1),n(4))},2296:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,o=n(43),i=(a=o)&&a.__esModule?a:{default:a},l=n(12);t.default={fetchInvoice:function(t){return new e((function(e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4===r.readyState?200===r.status?e(r.response):n(r.response):2===r.readyState&&(200===r.status?r.responseType="blob":r.responseType="json")},r.open("POST",CONFIG.printerApiUrl+"/v2/invoice",!0),r.setRequestHeader("Authorization","Bearer "+i.default.getJWTToken()),r.send(JSON.stringify(t))}))},mapInvoiceError:function(e){switch(!0){case r.includes(e,".html: no such file or directory"):return(0,l.__)("Unable to create invoice. Your language is not supported.");case r.includes(e,"jwt missing"):return(0,l.__)("Unable to create invoice. You are not logged in.");default:return(0,l.__)("Unable to create invoice.")}}}}).call(this,n(11),n(4))},2297:function(e,t,n){e.exports={"billing-history":"_subscription-card-billing-history--billing-history--1AoHt",grid:"_subscription-card-billing-history--grid--2qk73","grid-4":"_subscription-card-billing-history--grid-4--3bZbc _subscription-card-billing-history--grid--2qk73","grid-5":"_subscription-card-billing-history--grid-5--RZ3Fu _subscription-card-billing-history--grid--2qk73",cell:"_subscription-card-billing-history--cell--18rZS",value:"_subscription-card-billing-history--value--3HpCF _subscription-card-billing-history--cell--18rZS",label:"_subscription-card-billing-history--label--UHzpA _subscription-card-billing-history--cell--18rZS",overdue:"_subscription-card-billing-history--overdue--1JBBP"}},2298:function(e,t,n){"use strict";(function(e,r,a){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,i,l,s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1988)),u=n(1990),d=n(1895),f=n(2305),p=n(2306),m=n(28),h=y(n(0)),_=n(12);function y(e){return e&&e.__esModule?e:{default:e}}function g(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=r(y(n(2307)).default)((l=i=function(e){function t(){var e,n,r,a,o,i,l,s,u,f,p=this;v(this,t);for(var m=arguments.length,h=Array(m),_=0;_<m;_++)h[_]=arguments[_];return n=r=b(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(h))),r.state={chatId:c.INTERCOM_ID.CHAT},r.handleModalClose=function(){(0,r.props.handleOrderHistoryUpdate)(),(0,d.sendModalCloseEvent)(r.props.cancelEventProps,r.props.modalType),r.props.onHide()},r.handleCatalogOpen=function(){(0,d.sendCancelDiscountEvent)(r.props.cancelEventProps,r.props.modalType,c.EVENT_LABEL.SELF_SERVE_DISCOUNT_SEARCH_CATALOG),window.open("https://www.udacity.com/courses/all")},r.handleSelfServeCancel=(f=g(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.sendCancelEvent(c.EVENT_LABEL.SELF_SERVE,{cancel_reason:t,cancel_follow_up:n}),e.next=3,r.props.onSelfServeCancel(t,n);case 3:r.props.onHide();case 4:case"end":return e.stop()}}),e,p)}))),function(e,t){return f.apply(this,arguments)}),r.handleSelfServeDiscountCancel=(u=g(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.sendCancelEvent(c.EVENT_LABEL.SELF_SERVE_DISCOUNT_DISQUALIFIED,{cancel_reason:t}),e.next=3,r.props.onSelfServeCancel(t);case 3:case"end":return e.stop()}}),e,p)}))),function(e){return u.apply(this,arguments)}),r.handleSelfServeDiscountAbandoned=(s=g(regeneratorRuntime.mark((function e(t,n,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.sendCancelDiscountEvent)(r.props.cancelEventProps,r.props.modalType,c.EVENT_LABEL.SELF_SERVE_DISCOUNT_ABANDONED,{cancel_reason:t,discounted_amount:n,refunded_amount:o,subtotal_amount:a});case 1:case"end":return e.stop()}}),e,p)}))),function(e,t,n,r){return s.apply(this,arguments)}),r.handleSelfServeDiscountPresented=(l=g(regeneratorRuntime.mark((function e(t,n,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.sendCancelDiscountEvent)(r.props.cancelEventProps,r.props.modalType,c.EVENT_LABEL.SELF_SERVE_DISCOUNT_PRESENTED,{cancel_reason:t,discounted_amount:n,refunded_amount:o,subtotal_amount:a});case 1:case"end":return e.stop()}}),e,p)}))),function(e,t,n,r){return l.apply(this,arguments)}),r.handleSelfServeDiscountAccepted=(i=g(regeneratorRuntime.mark((function e(t,n,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.sendCancelDiscountEvent)(r.props.cancelEventProps,r.props.modalType,c.EVENT_LABEL.SELF_SERVE_DISCOUNT_ACCEPTED,{cancel_reason:t,discounted_amount:n,refunded_amount:o,subtotal_amount:a});case 1:case"end":return e.stop()}}),e,p)}))),function(e,t,n,r){return i.apply(this,arguments)}),r.handleSelfServeDiscountApplied=(o=g(regeneratorRuntime.mark((function e(t,n,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,d.sendCancelDiscountEvent)(r.props.cancelEventProps,r.props.modalType,c.EVENT_LABEL.SELF_SERVE_DISCOUNT_APPLIED,{cancel_reason:t,discounted_amount:n,refunded_amount:o,subtotal_amount:a}),e.next=3,r.props.onSelfServeDiscountApplied();case 3:r.props.onHide();case 4:case"end":return e.stop()}}),e,p)}))),function(e,t,n,r){return o.apply(this,arguments)}),r.handleSelfServeDiscountApplyFailed=(a=g(regeneratorRuntime.mark((function e(t,n,a,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,d.sendCancelDiscountEvent)(r.props.cancelEventProps,r.props.modalType,c.EVENT_LABEL.SELF_SERVE_DISCOUNT_APPLY_FAILED,{cancel_reason:t,discounted_amount:n,refunded_amount:o,subtotal_amount:a});case 1:case"end":return e.stop()}}),e,p)}))),function(e,t,n,r){return a.apply(this,arguments)}),r.handlePhoneCancel=function(){r.sendCancelEvent(c.EVENT_LABEL.CALL_CLICKED),document.location.href="tel:+"+c.CALL_CENTER.phoneNumber},r.preventIntercomDuplicates=function(){r.state.chatId?r.setState({chatId:""}):"function"==typeof window.Intercom&&window.Intercom("show")},r.sendCancelEvent=function(e,t){(0,d.sendCancelRequestInitiated)(r.props.cancelEventProps,r.props.modalType,e,t)},b(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),s(t,[{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&(0,d.sendModalOpenEvent)(this.props.cancelEventProps,this.props.modalType)}},{key:"renderCancelModal",value:function(){var e=this;switch(this.props.modalType){case d.SUPPORT_BY.PHONE_CHAT.name:return a.createElement(u.CancelByPhone,{handleCall:function(){return e.handlePhoneCancel()},phoneLabel:c.CALL_CENTER.phoneLabel},a.createElement(u.SecondaryChat,{chatId:this.state.chatId,handleChat:function(){e.sendCancelEvent(c.EVENT_LABEL.CHAT_CLICKED),e.preventIntercomDuplicates(),e.handleModalClose()}}));case d.SUPPORT_BY.PHONE_EMAIL.name:return a.createElement(u.CancelByPhone,{handleCall:function(){return e.handlePhoneCancel()},phoneLabel:c.CALL_CENTER.phoneLabel},a.createElement(u.SecondaryEmail,{emailAddress:c.EMAIL_ADDRESS}));case d.SUPPORT_BY.CHAT.name:return a.createElement(u.CancelByChat,{chatId:this.state.chatId,handleChat:function(){e.sendCancelEvent(c.EVENT_LABEL.CHAT_CLICKED),e.preventIntercomDuplicates()}});case d.SUPPORT_BY.PHONE.name:return a.createElement(u.CancelByPhone,{handleCall:function(){return e.handlePhoneCancel()},phoneLabel:c.CALL_CENTER.phoneLabel});case d.SUPPORT_BY.SELF_SERVE.name:var t=this.props,n=t.itemType,r=t.periodEndDate,o=t.isPreorder,i=t.refundable;return a.createElement(f.CancelSurvey,{onSurveyComplete:this.handleSelfServeCancel,itemType:n,periodEndDate:r,isPreorder:o,refundable:i});case d.SUPPORT_BY.SELF_SERVE_DISCOUNT.name:var l=this.props,s=l.itemType,m=l.periodEndDate,h=l.isPreorder,_=l.refundable,y=l.subscriptionUrn,g=l.originalPrice;return a.createElement(p.CancelSurveyWithDiscount,{onSurveyCancel:this.handleSelfServeDiscountCancel,onSurveyDiscountApplied:this.handleSelfServeDiscountApplied,onSurveyDiscountAccepted:this.handleSelfServeDiscountAccepted,onSurveyDiscountApplyFailed:this.handleSelfServeDiscountApplyFailed,onSurveyDiscountPresented:this.handleSelfServeDiscountPresented,onSurveyDiscountAbandoned:this.handleSelfServeDiscountAbandoned,handleSurveyModalClose:this.handleModalClose,handleCatalogOpen:this.handleCatalogOpen,itemType:s,periodEndDate:m,isPreorder:h,refundable:_,subscriptionUrn:y,originalPrice:g});default:return a.createElement(u.CancelError,null)}}},{key:"render",value:function(){return a.createElement(m.Modal,{open:this.props.show,onClose:this.handleModalClose,label:(0,_.__)("Cancel Subscription"),closeLabel:(0,_.__)("Close Modal")},this.renderCancelModal())}}]),t}(a.Component),i.displayName="settings/setting-subscriptions/_cancel-modal",i.propTypes={cancelEventProps:h.default.object.isRequired,itemType:h.default.string.isRequired,isPreorder:h.default.bool.isRequired,handleOrderHistoryUpdate:h.default.func.isRequired,modalType:h.default.oneOf(Object.values(d.SUPPORT_BY).map((function(e){return e.name}))).isRequired,nanodegreeTitle:h.default.string,onHide:h.default.func.isRequired,onSelfServeCancel:h.default.func.isRequired,onSelfServeDiscountApplied:h.default.func.isRequired,periodEndDate:h.default.string,refundable:h.default.bool.isRequired,show:h.default.bool.isRequired},o=l))||o;t.default=E}).call(this,n(11),n(10),n(1))},2299:function(e,t,n){e.exports={"responses-container":"_cancel-question--responses-container--1LyUb form--flex-column--g8OLQ","other-reason":"_cancel-question--other-reason--1ZWna","other-reason-input":"_cancel-question--other-reason-input--2QUJI","text-area":"_cancel-question--text-area--2KyOI",dropdown:"_cancel-question--dropdown--yI8v8"}},2300:function(e,t,n){e.exports=n.p+"images/clock-89c52.svg"},2301:function(e,t,n){e.exports=n.p+"images/message-32fb0.svg"},2302:function(e,t,n){e.exports=n.p+"images/nanodegree-368f7.svg"},2303:function(e,t,n){e.exports=n.p+"images/phone-ccec9.svg"},2304:function(e,t,n){e.exports=n.p+"images/tags-dde27.svg"},2305:function(e,t,n){"use strict";(function(e,r,a,o){Object.defineProperty(t,"__esModule",{value:!0}),t.CancelSurvey=void 0;var i,l,s,c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(28),d=n(1899),f=g(n(1991)),p=n(347),m=g(n(0)),h=n(1761),_=n(12),y=g(n(1993));function g(e){return e&&e.__esModule?e:{default:e}}function v(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var C={cancelReasonKey:"",cancelFollowUp:!1,cancelInFlight:!1,dropdownFollowUp:"",radioSelection:"",radioSelectionFollowUp:"",showInitialQuestion:!0,otherText:"",otherTextFollowUp:"",otherTextAreaFollowUp:""};t.CancelSurvey=r(y.default)((s=l=function(e){function t(){var e,n,r,i=this;b(this,t);for(var l=arguments.length,s=Array(l),c=0;c<l;c++)s[c]=arguments[c];return n=r=E(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state=C,r.resetCancelForm=function(){r.setState(C)},r.handleReasonChange=function(e){var t=o.get(e,"raw"),n=o.get(e,"key"),a=o.includes(["","Other"],t),i=void 0;d.CANCEL_SURVEY.FOLLOW_UP_QUESTIONS[n]?(a=!1,i=!1):(a=!0,i=!0),r.setState({cancelReasonKey:n,radioSelection:t,showInitialQuestion:a,cancelFollowUp:i})},r.handleFollowUpDropdownChange=function(e){var t=o.get(e,"value"),n=!!t;r.setState({dropdownFollowUp:t,cancelFollowUp:n})},r.handleFollowUpReasonChange=function(e){var t=o.get(e,"raw");r.setState({radioSelectionFollowUp:t,cancelFollowUp:!0})},r.handleFollowUpTextAreaChange=function(e){var t=!o.isEmpty(e);r.setState({otherTextAreaFollowUp:e,cancelFollowUp:t})},r.handleOtherReasonChange=function(e){r.setState({otherText:e,radioSelection:"Other"})},r.handleOtherFollowUpChange=function(e){r.setState({otherTextFollowUp:e,followUpSelection:"Other",cancelFollowUp:!0})},r.handleCancelSurveyClick=v(regeneratorRuntime.mark((function e(){var t,n,a,l,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.onSurveyComplete,n=r.state.cancelReasonKey,a=r.getCancelReason(),l=o.get(d.CANCEL_SURVEY.FOLLOW_UP_QUESTIONS,"["+n+"].question"),s=r.getCancelFollowUpReason(),c={cancel_follow_up_question:l,cancel_follow_up_reason:s},r.setState({cancelInFlight:!0}),e.next=9,t(a,c);case 9:r.setState({cancelInFlight:!1}),r.resetCancelForm();case 11:case"end":return e.stop()}}),e,i)}))),r.itemName=function(){return r.props.itemType===p.FLEX_SUBSCRIPTION?(0,_.__)("Subscription"):(0,_.__)("Payment")},r.getCancelReason=function(){var e=r.state,t=e.radioSelection,n=e.otherText,a=t;return"Other"===t&&(a+=" - "+n),a},r.getCancelFollowUpReason=function(){var e=r.state,t=e.dropdownFollowUp,n=e.radioSelectionFollowUp,a=e.otherTextFollowUp,o=e.otherTextAreaFollowUp;return"Other"===n?n+" - "+a:t||n||o},r.getCancelMessage=function(){var e=r.props,t=e.itemType,n=e.periodEndDate,a=e.refundable,o=void 0;switch(!0){case t===p.FLEX_SUBSCRIPTION&&a:o=(0,_.__)("To help us improve our programs, please let us know why you would like to cancel. Canceling your subscription will result in loss of access immediately. Your refund will be posted to your billing history.");break;case t===p.FLEX_SUBSCRIPTION&&!a:o=(0,_.__)("To help us improve our programs, please let us know why you would like to cancel. Canceling your subscription will discontinue future and auto-renew payments. Your enrollment will be active through <%= periodEndDate %>.",{periodEndDate:n});break;default:o=(0,_.__)("To help us improve our programs, please let us know why you would like to cancel.")}return o},r.renderInitialQuestion=function(){var e=r.props.isPreorder,t=r.state,n=t.radioSelection,o=t.otherText;return a.createElement(f.default,{heading:a.createElement(u.Heading,{size:"h1"},(0,_.__)("Leaving So Soon?")),question:r.getCancelMessage(),reasons:d.CANCEL_SURVEY.getReasons({isPreorder:e}),type:h.TYPES.RADIO,onReasonChange:r.handleReasonChange,radioSelection:n,value:n,hasOtherOption:!0,onOtherTextChange:r.handleOtherReasonChange,otherText:o})},r.renderFollowUpQuestion=function(e){var t=d.CANCEL_SURVEY.FOLLOW_UP_QUESTIONS[e];if(!t)return null;var n=r.state,o=n.radioSelectionFollowUp,i=n.dropdownFollowUp,l=n.otherTextFollowUp,s=n.otherTextAreaFollowUp,c=void 0;switch(t.type){case h.TYPES.DROPDOWN:c=i;break;case h.TYPES.RADIO:c=o;break;case h.TYPES.TEXT_AREA:c=s;break;default:c=""}return a.createElement(f.default,{heading:a.createElement(u.Heading,{size:"h1"},(0,_.__)("Tell us more")),question:t.question,reasons:t.options,type:t.type,onDropdownChange:r.handleFollowUpDropdownChange,onReasonChange:r.handleFollowUpReasonChange,radioSelection:r.radioSelectionFollowUp,hasOtherOption:t.hasOtherOption,value:c,onOtherTextChange:r.handleOtherFollowUpChange,otherText:l,onTextChange:r.handleFollowUpTextAreaChange,hiddenLabel:t.hiddenLabel})},E(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),c(t,[{key:"render",value:function(){var e=this.state,t=e.cancelFollowUp,n=e.cancelInFlight,r=e.cancelReasonKey,i=e.showInitialQuestion,l=e.otherText,s=void 0;return i?s=this.renderInitialQuestion():r&&(s=this.renderFollowUpQuestion(r)),a.createElement("div",null,s,a.createElement(u.Button,{label:(0,_.__)("Cancel <%= item_name %>",{item_name:this.itemName()}),disabled:o.isEmpty(r)||o.isEmpty(l)&&!t||n,variant:"destructive",onClick:this.handleCancelSurveyClick}))}}]),t}(a.Component),l.propTypes={onSurveyComplete:m.default.func.isRequired,itemType:m.default.string.isRequired,isPreorder:m.default.bool.isRequired,periodEndDate:m.default.string,refundable:m.default.bool.isRequired},i=s))||i}).call(this,n(11),n(10),n(1),n(4))},2306:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0}),t.CancelSurveyWithDiscount=void 0;var a,o,i,l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1990),c=n(1895),u=n(1899),d=n(0),f=(i=d)&&i.__esModule?i:{default:i};function p(t){return function(){var n=t.apply(this,arguments);return new e((function(t,r){return function a(o,i){try{var l=n[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));t(s)}("next")}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _="Initial Questions Page",y="Discount Offer Page",g="Discount Offer Error Page",v="Subscription Cancelled Page",b={cancelReasonKey:"",cancelReasonMessage:"",cancelInFlight:!1,checkOfferEligibilityInFlight:!1,discountedDisplayPrice:"",subtotalDisplayAmount:"",refundDisplayAmount:"",isLoading:!1,currentPage:_,generateCouponInFlight:!1,declinedOffer:0};t.CancelSurveyWithDiscount=(o=a=function(t){function n(){var t,r,a,o=this;m(this,n);for(var i=arguments.length,l=Array(i),s=0;s<i;s++)l[s]=arguments[s];return r=a=h(this,(t=n.__proto__||Object.getPrototypeOf(n)).call.apply(t,[this].concat(l))),a.state=b,a.componentWillUnmount=function(){a.cancelSpinnerTimeout()},a.getHasDeclinedOffer=function(){return 0!==a.state.declinedOffer},a.resetCancelForm=function(){a.setState(b)},a.handleCancelReasonChange=function(e,t){a.setState({cancelReasonKey:e,cancelReasonMessage:t})},a.handleGenerateDiscountCoupon=p(regeneratorRuntime.mark((function e(){var t,n,r,i,l,s,u,d,f,p,m;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.onSurveyDiscountApplied,r=t.onSurveyDiscountAccepted,i=t.onSurveyDiscountApplyFailed,l=t.subscriptionUrn,s=a.state,u=s.cancelReasonMessage,d=s.discountedDisplayPrice,f=s.refundDisplayAmount,p=s.subtotalDisplayAmount,r(u,d,p,f),a.setState({generateCouponInFlight:!0}),e.next=6,(0,c.generateDiscountCoupon)(l,a.getHasDeclinedOffer());case 6:m=e.sent,a.setState({generateCouponInFlight:!1}),m?n(u,d,p,f):(i(u,d,p,f),a.setState({currentPage:g}));case 9:case"end":return e.stop()}}),e,o)}))),a.checkDiscountEligibility=p(regeneratorRuntime.mark((function e(){var t,n,r,i,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.subscriptionUrn,n=!1,r="",i="",l="",a.setState({checkOfferEligibilityInFlight:!0}),e.next=8,(0,c.checkDiscountOfferEligibility)(t,a.getHasDeclinedOffer());case 8:return s=e.sent,n=s.discountOfferEligible,r=s.discountDisplayPrice,i=s.subtotalDisplayAmount,l=s.refundDisplayAmount,a.setState({checkOfferEligibilityInFlight:!1,discountedDisplayPrice:r,subtotalDisplayAmount:i,refundDisplayAmount:l}),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,o)}))),a.fauxSpinner=function(t){return new e((function(e){a.setState({isLoading:setTimeout((function(){a.setState({isLoading:!1}),e()}),t)})}))},a.cancelSpinnerTimeout=function(){"number"==typeof a.state.isLoading&&clearTimeout(a.state.isLoading)},a.handleAbandonDiscountOffer=p(regeneratorRuntime.mark((function e(){var t,n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.onSurveyDiscountAbandoned,n=a.state,r=n.cancelReasonMessage,i=n.declinedOffer,t(r,a.state.discountedDisplayPrice,a.state.subtotalDisplayAmount,a.state.refundDisplayAmount),!(i<2)){e.next=9;break}return e.next=6,a.fauxSpinner(2e3);case 6:a.setState((function(e){return{declinedOffer:e.declinedOffer+1}}),a._handleDiscountOfferEligibleOrCancel),e.next=11;break;case 9:return e.next=11,a.handleCancel();case 11:case"end":return e.stop()}}),e,o)}))),a.handleDiscountOfferEligibleOrCancel=function(e,t){a.setState({cancelReasonKey:e,cancelReasonMessage:t},a._handleDiscountOfferEligibleOrCancel)},a._handleDiscountOfferEligibleOrCancel=p(regeneratorRuntime.mark((function e(){var t,n,r,i,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.onSurveyDiscountPresented,n=a.state,r=n.declinedOffer,i=n.cancelReasonKey,l=n.cancelReasonMessage,s=!1,e.next=5,a.fauxSpinner(1e3);case 5:if(i!==u.CANCEL_SURVEY.COST&&i!==u.CANCEL_SURVEY.TIME&&i!==u.CANCEL_SURVEY.OTHER){e.next=9;break}return e.next=8,a.checkDiscountEligibility();case 8:s=e.sent;case 9:if(a.setState({cancelReasonKey:i,cancelReasonMessage:l}),!(s&&r<2)){e.next=15;break}t(l,a.state.discountedDisplayPrice,a.state.subtotalDisplayAmount,a.state.refundDisplayAmount),a.setState({currentPage:y}),e.next=17;break;case 15:return e.next=17,a.handleCancel();case 17:case"end":return e.stop()}}),e,o)}))),a.handleCancel=p(regeneratorRuntime.mark((function e(){var t,n,r,i,l,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props,n=t.onSurveyCancel,r=t.handleSurveyModalClose,i=a.state,l=i.cancelReasonKey,s=i.cancelReasonMessage,a.setState({cancelInFlight:!0}),e.next=5,n(s);case 5:a.setState({cancelInFlight:!1}),l===u.CANCEL_SURVEY.FIT?a.setState({currentPage:v}):r();case 7:case"end":return e.stop()}}),e,o)}))),h(a,r)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),l(n,[{key:"render",value:function(){var e=this.props,t=e.refundable,n=e.handleSurveyModalClose,a=e.handleCatalogOpen,o=e.originalPrice,i=this.state,l=i.cancelReasonKey,c=i.currentPage,u=i.cancelInFlight,d=i.checkOfferEligibilityInFlight,f=i.generateCouponInFlight,p=i.isLoading,m=i.discountedDisplayPrice,h=i.refundDisplayAmount,b=i.subtotalDisplayAmount;switch(c){case _:return r.createElement(s.CancelSurveyDiscountQuestions,{periodEndDate:this.props.periodEndDate,handleDiscountOfferEligibleOrCancel:this.handleDiscountOfferEligibleOrCancel,handleCancelReasonChange:this.handleCancelReasonChange,cancelInFlight:u,checkOfferEligibilityInFlight:d,isLoading:!!p,handleModalClose:n,isRefundable:t});case y:return r.createElement(s.CancelDiscountOffer,{discountedDisplayPrice:m,subtotalDisplayAmount:b,refundedDisplayAmount:h,cancelReasonKey:l,handleAbandonDiscountOffer:this.handleAbandonDiscountOffer,generateCouponInFlight:f,isLoading:!!p,handleGenerateDiscountCoupon:this.handleGenerateDiscountCoupon,cancelInFlight:u,originalPrice:o,declinedOffer:this.getHasDeclinedOffer()});case v:return r.createElement(s.CancelSuccess,{periodEndDate:this.props.periodEndDate,handleModalClose:n,isRefundable:t,handleCatalogOpen:a});case g:return r.createElement(s.CancelDiscountOfferError,{handleCancel:this.handleCancel,handleModalClose:n,cancelInFlight:u});default:return r.createElement(s.CancelError,null)}}}]),n}(r.Component),a.propTypes={onSurveyCancel:f.default.func.isRequired,onSurveyDiscountApplied:f.default.func.isRequired,onSurveyDiscountAccepted:f.default.func.isRequired,onSurveyDiscountApplyFailed:f.default.func.isRequired,onSurveyDiscountPresented:f.default.func.isRequired,onSurveyDiscountAbandoned:f.default.func.isRequired,handleSurveyModalClose:f.default.func.isRequired,handleCatalogOpen:f.default.func.isRequired,itemType:f.default.string.isRequired,isPreorder:f.default.bool.isRequired,periodEndDate:f.default.string,refundable:f.default.bool.isRequired,subscriptionUrn:f.default.string.isRequired,originalPrice:f.default.object},o)}).call(this,n(11),n(1))},2307:function(e,t,n){e.exports={"checkbox-phone-opt-in":"_cancel-modal--checkbox-phone-opt-in--eoT6n","phone-number-manager":"_cancel-modal--phone-number-manager--1047A","prompt-container":"_cancel-modal--prompt-container--1XXWt"}},2308:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r,a=n(32),o=(r=a)&&r.__esModule?r:{default:r};var i=""+CONFIG.contentfulApiKey;t.default={getNDFromContentful:function(t){var n,r=this;return(n=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.default.get("https://www.udacity.com/www-proxy/contentful/spaces/2y9b3o528xhq/environments/master/entries?locale=en-US&content_type=pageNdopV0&select=sys.id,fields.slug,fields.key&include=1&fields.key="+t,"",{headers:{Authorization:"Bearer "+i}});case 3:return n=e.sent,e.abrupt("return",n);case 7:return e.prev=7,e.t0=e.catch(0),console.error(e.t0,"failed to fetch nd from contentful"),e.abrupt("return",{});case 11:case"end":return e.stop()}}),e,r,[[0,7]])})),function(){var t=n.apply(this,arguments);return new e((function(n,r){return function a(o,i){try{var l=t[o](i),s=l.value}catch(e){return void r(e)}if(!l.done)return e.resolve(s).then((function(e){a("next",e)}),(function(e){a("throw",e)}));n(s)}("next")}))})()}}}).call(this,n(11))},2309:function(e,t,n){e.exports={item:"_subscription-card--item--agyqV","free-trial-message":"_subscription-card--free-trial-message--1OUwq",contain:"_subscription-card--contain--1GsM3",product:"_subscription-card--product--2cyE4",status:"_subscription-card--status--oxbuy",title:"_subscription-card--title--V_PDa","info-line":"_subscription-card--info-line--2toRW",bold:"_subscription-card--bold--1CIQL",payment:"_subscription-card--payment--2nNM1",grid:"_subscription-card--grid--1d5gq","payment-info":"_subscription-card--payment-info--1s7H0","payment-auto-renew":"_subscription-card--payment-auto-renew--1JtuF","payment-pay-now":"_subscription-card--payment-pay-now--3CNyj","payment-due":"_subscription-card--payment-due--yM63l","payment-due-date":"_subscription-card--payment-due-date--2qnk3","payment-message":"_subscription-card--payment-message--kXQc5",pay:"_subscription-card--pay--29EP4","pay-amount":"_subscription-card--pay-amount--1nkWw",billing:"_subscription-card--billing--1y7SW","billing-cancel":"_subscription-card--billing-cancel--3rwvE _subscription-card--billing--1y7SW","drawer-icon":"_subscription-card--drawer-icon--8f79t","flex-center":"_subscription-card--flex-center--15ZYq","billing-link":"_subscription-card--billing-link--3DmbG","no-payment-canceled":"_subscription-card--no-payment-canceled--1rJzP","no-payment-canceling":"_subscription-card--no-payment-canceling--wiz_5","no-payment-needed":"_subscription-card--no-payment-needed--1aR9R",banner:"_subscription-card--banner--3_u_E"}},2310:function(e,t,n){e.exports={"content-container":"_subscriptions--content-container--2FV2K form--flex-column--g8OLQ",title:"_subscriptions--title--2nNpU","billing-card":"_subscriptions--billing-card--1_rR6",showing:"_subscriptions--showing--31Mhv",line:"_subscriptions--line--22v27",center:"_subscriptions--center--2jcVU",footer:"_subscriptions--footer--2y9Rx","see-more":"_subscriptions--see-more--3zqot","no-subscriptions":"_subscriptions--no-subscriptions--3Pm1g"}}}]);
//# sourceMappingURL=https://s3-us-west-2.amazonaws.com/udacity-classroom-web/js/routes-settings.4d6f8.js.map